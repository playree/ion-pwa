{"version":3,"sources":["layout/sideMenuLayout.tsx","dexie.ts","helpers/settings.ts","helpers/didTools.ts","pages/top.tsx","pages/qr.tsx","pages/did.tsx","pages/settings.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","ServiceWorkerUpdateDialog.tsx","index.tsx"],"names":["drawerWidth","Main","styled","shouldForwardProp","prop","theme","open","flexGrow","padding","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","easeOut","enteringScreen","AppBar","MuiAppBar","width","DrawerHeader","display","alignItems","mixins","toolbar","justifyContent","menulink","textDecorationLine","color","fontWeight","NowLoadingContext","React","SettingsContext","DidContext","useDidContext","SideMenuLayout","useTheme","setOpen","isNowLoading","setNowLoading","settings","setSettings","handleDrawerClose","nowLoadingValue","settingsValue","didValue","didModel","setDidModel","Box","sx","CssBaseline","position","Toolbar","minHeight","IconButton","onClick","edge","mr","Typography","variant","noWrap","component","Drawer","flexShrink","boxSizing","anchor","direction","Divider","List","to","style","ListItem","button","ListItemIcon","minWidth","ListItemText","primary","fontSize","Provider","value","height","paddingX","Backdrop","zIndex","drawer","CircularProgress","className","SettingsModel","key","this","KEYS","URL_OPERATION","URL_RESOLVE","didlong","signingPrivateKey","recoveryPrivateKey","updatePrivateKey","KEY","dexieDb","Dexie","version","stores","did","privatekey","Settings","urlOperation","urlResolve","get","dbUrlOperation","dbUrlResolve","put","load","clear","DidTool","url","signingKeyId","IonKey","generateEs256kOperationKeyPair","recoveryKey","updateKey","generateEs256kDidDocumentKeyPair","id","signingKey","input","document","publicKeys","createRequest","IonRequest","createCreateRequest","longFormDid","IonDid","createLongFormDid","longFormSuffixData","substring","lastIndexOf","IonProofOfWork","submitIonRequest","urljoin","ACTION_PATH","PROOF","OPERATIONS","JSON","stringify","resText","resObj","parse","didDocument","didParts","split","scheme","didSuffix","length","method","published","didDocumentMetadata","DidModel","fetch","IDENTIFIERS","res","status","text","error","json","ID","PrivateKeyTool","privateKey","PrivateKeyModel","RESERVE_ID","RECOVERY","UPDATE","SIGNING_KEY","join","PageTop","nowLoadingContext","settingsContext","didContext","openDidCreated","setOpenDidCreated","openDialog","setOpenDialog","title","textDialog","setTextDialog","handleCloseDidCreated","event","reason","setup","setTimeout","registerDid","didInfo","save","resolveDid","_resolveDid","resolveDidLong","didLong","resolve","deleteDid","closeDialog","Container","maxWidth","marginBottom","Grid","container","item","xs","Button","size","startIcon","Snackbar","autoHideDuration","onClose","Alert","severity","Chip","label","Card","CardContent","TextField","fullWidth","multiline","InputProps","readOnly","fixed","marginTop","textAlign","marginX","CardActions","Dialog","DialogTitle","DialogContent","maxRows","DialogActions","autoFocus","PageQr","qrText","setQrText","qr","constraints","facingMode","onResult","result","console","log","getText","qrResult","wordWrap","PageDid","signing","recovery","update","privateKeys","setPrivateKeys","Accordion","AccordionSummary","expandIcon","AccordionDetails","replace","PageSettings","setUrlOperation","setUrlResolve","handleChange","e","target","handleClose","saveSettings","resetSettings","then","onChange","App","element","index","path","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","waiting","onUpdate","installingWorker","installing","onstatechange","state","controller","onSuccess","reload","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","SWUpdateDialog","useState","show","setShow","DialogContentText","postMessage","type","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","addEventListener","headers","response","contentType","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration","querySelector"],"mappings":"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","file":"static/js/main.64e93265.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Outlet } from 'react-router-dom'\nimport { styled, useTheme } from '@mui/material/styles';\nimport { Box, Drawer, CssBaseline, Toolbar, Typography, Divider, IconButton, \n  List, ListItem, ListItemIcon, ListItemText, Backdrop, CircularProgress} from '@mui/material';\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from '@mui/material/AppBar';\nimport { \n  Menu as IconMenu,\n  ChevronLeft as IconChevronLeft,\n  ChevronRight as IconChevronRight,\n  Home as IconHome,\n  QrCode as IconQrCode,\n  Key as IconKey,\n  Settings as IconSettings \n} from '@mui/icons-material';\nimport { NavLink } from 'react-router-dom';\n\nimport { Settings } from '../helpers/settings';\nimport { DidModel } from '../helpers/didTools';\n\nconst buildNo = '20220531.004';\nconst drawerWidth = 200;\n\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })<{\n  open?: boolean;\n}>(({ theme, open }) => ({\n  flexGrow: 1,\n  padding: theme.spacing(3),\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  marginLeft: `-${drawerWidth}px`,\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  }),\n}));\n\ninterface AppBarProps extends MuiAppBarProps {\n  open?: boolean;\n}\n\nconst AppBar = styled(MuiAppBar, {\n  shouldForwardProp: (prop) => prop !== 'open',\n})<AppBarProps>(({ theme, open }) => ({\n  transition: theme.transitions.create(['margin', 'width'], {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  ...(open && {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: `${drawerWidth}px`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  }),\n}));\n\nconst DrawerHeader = styled('div')(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(0, 1),\n  // necessary for content to be below app bar\n  ...theme.mixins.toolbar,\n  justifyContent: 'flex-end',\n}));\n\nconst menulink = {\n  textDecorationLine: 'none',\n  color: '#444',\n  fontWeight: 'bold'\n}\n\n// ロード中表示のコンテキスト\nexport type NowLoadingContextType = {\n  isNowLoading: boolean;\n  setNowLoading: (isNowLoading: boolean) => void;\n}\nconst NowLoadingContext = React.createContext<NowLoadingContextType>({} as NowLoadingContextType);\nexport const useNowLoadingContext = ():NowLoadingContextType => {\n  return React.useContext<NowLoadingContextType>(NowLoadingContext);\n}\n\n// 設定のコンテキスト\nexport type SettingsContextType = {\n  settings: Settings | null;\n  setSettings: (settings: Settings) => void;\n}\nconst SettingsContext = React.createContext<SettingsContextType>({} as SettingsContextType);\nexport const useSettingsContext = ():SettingsContextType => {\n  return React.useContext<SettingsContextType>(SettingsContext);\n}\n\n// DID情報のコンテキスト\nexport type DidContextType = {\n  didModel: DidModel | null;\n  setDidModel: (didModel: DidModel | null) => void;\n}\nconst DidContext = React.createContext<DidContextType>({} as DidContextType);\nexport const useDidContext = ():DidContextType => {\n  return React.useContext<DidContextType>(DidContext);\n}\n\nexport const SideMenuLayout = () => {\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n  const [isNowLoading, setNowLoading] = React.useState(false);\n  const [settings, setSettings] = React.useState<Settings | null>(null);\n  const [didModel, setDidModel] = React.useState<DidModel | null>(null);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const nowLoadingValue: NowLoadingContextType = { isNowLoading, setNowLoading };\n  const settingsValue: SettingsContextType = { settings, setSettings };\n  const didValue: DidContextType = { didModel, setDidModel };\n\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" open={open}>\n        <Toolbar sx={{minHeight: '40px'}}>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            sx={{ mr: 2, ...(open && { display: 'none' }) }}\n          >\n            <IconMenu />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap component=\"div\">\n            ION PWA Sample\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        sx={{\n          width: drawerWidth,\n          flexShrink: 0,\n          '& .MuiDrawer-paper': {\n            width: drawerWidth,\n            boxSizing: 'border-box',\n          },\n        }}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={open}\n      >\n        <DrawerHeader>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <IconChevronLeft /> : <IconChevronRight />}\n          </IconButton>\n        </DrawerHeader>\n        <Divider />\n\n        <List>\n          <NavLink to='/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconHome /></ListItemIcon>\n              <ListItemText primary='トップ' />\n            </ListItem>\n          </NavLink>\n          <NavLink to='/qr/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconQrCode /></ListItemIcon>\n              <ListItemText primary='QR読み込み' />\n            </ListItem>\n          </NavLink>\n          <NavLink to='/did/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconKey /></ListItemIcon>\n              <ListItemText primary='DID詳細' />\n            </ListItem>\n          </NavLink>\n        </List>\n        <Divider />\n        <List>\n          <NavLink to='/settings/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconSettings /></ListItemIcon>\n              <ListItemText primary='設定' />\n            </ListItem>\n          </NavLink>\n        </List>\n        <Divider />\n        <List>\n          <ListItem sx={{fontSize: '14px', color: 'gray'}}>\n            build: {buildNo}\n          </ListItem>\n        </List>\n\n      </Drawer>\n      <NowLoadingContext.Provider value={nowLoadingValue}>\n        <SettingsContext.Provider value={settingsValue}>\n          <DidContext.Provider value={didValue}>\n            <Main onClick={handleDrawerClose} sx={{height: '100vh', width: '100%', paddingX: '8px'}}>\n              <DrawerHeader sx={{minHeight: '40px'}} />\n              <Outlet />\n            </Main>\n            <Backdrop\n              sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n              open={nowLoadingValue.isNowLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          </DidContext.Provider>\n        </SettingsContext.Provider>\n      </NowLoadingContext.Provider>\n      <div className=\"SW-update-dialog\"></div>\n    </Box>\n  );\n}\n","import { Dexie, Table } from 'dexie';\nimport JwkEs256k from '@decentralized-identity/ion-sdk/dist/lib/models/JwkEs256k'\n\nimport { DidModel, PrivateKeyModel } from './helpers/didTools';\n\n// スキーマの修正がある場合、この値を変更する必要あり\nconst SCHEMA_VERSION = 1\n\nexport class SettingsModel {\n  key: string;\n  value: any;\n  constructor(key: string, value: any) {\n    this.key = key;\n    this.value = value;\n  };\n\n  static KEYS = {\n    URL_OPERATION: 'URL_OPERATION',\n    URL_RESOLVE: 'URL_RESOLVE',\n  }\n};\n\nexport class DidInfoModel {\n  key: string;\n  didlong: string;\n  signingPrivateKey: JwkEs256k;\n  recoveryPrivateKey: JwkEs256k;\n  updatePrivateKey: JwkEs256k;\n  constructor(\n    key: string, \n    didlong: string,\n    signingPrivateKey: JwkEs256k,\n    recoveryPrivateKey: JwkEs256k,\n    updatePrivateKey: JwkEs256k\n    ) {\n    this.key = key;\n    this.didlong = didlong;\n    this.signingPrivateKey = signingPrivateKey;\n    this.recoveryPrivateKey = recoveryPrivateKey;\n    this.updatePrivateKey = updatePrivateKey;\n  };\n\n  static KEY = 'KEY';\n};\n\ninterface IonPwaDatabase extends Dexie {\n  settings: Table<SettingsModel, string>;\n  did: Table<DidModel, string>;\n  privatekey: Table<PrivateKeyModel, string>;\n};\nexport const dexieDb = new Dexie('ionpwa-db') as IonPwaDatabase;\n\ndexieDb.version(SCHEMA_VERSION).stores({\n  settings: 'key',\n  did: 'id',\n  privatekey: 'id',\n});","import { dexieDb, SettingsModel } from '../dexie';\n\nexport class Settings {\n  urlOperation: string;\n  urlResolve: string;\n\n  constructor(){\n    // デフォルト値\n    this.urlOperation = 'https://beta.ion.msidentity.com/api/v1.0/';\n    this.urlResolve = 'https://beta.discover.did.microsoft.com/1.0/';\n  }\n\n  async load() {\n    // indexedDBからLoad\n    const dbUrlOperation = await dexieDb.settings.get(SettingsModel.KEYS.URL_OPERATION);\n    if (dbUrlOperation) {\n      this.urlOperation = dbUrlOperation.value;\n    }\n    const dbUrlResolve = await dexieDb.settings.get(SettingsModel.KEYS.URL_RESOLVE);\n    if (dbUrlResolve) {\n      this.urlResolve = dbUrlResolve.value;\n    }\n  }\n\n  async save() {\n    // indexedDBにSave\n    await dexieDb.settings.put(new SettingsModel(SettingsModel.KEYS.URL_OPERATION, this.urlOperation));\n    await dexieDb.settings.put(new SettingsModel(SettingsModel.KEYS.URL_RESOLVE, this.urlResolve));\n  }\n\n  static async load() {\n    const settings = new Settings();\n    await settings.load();\n    return settings;\n  }\n\n  static async clear() {\n    await dexieDb.settings.clear();\n  }\n}","import { IonDid, IonDocumentModel, IonKey, IonRequest } from '@decentralized-identity/ion-sdk';\nimport JwkEs256k from '@decentralized-identity/ion-sdk/dist/lib/models/JwkEs256k';\nimport IonProofOfWork from 'ion-pow-sdk';\nimport { dexieDb } from '../dexie';\nimport urljoin from 'url-join';\nimport { fetch } from 'cross-fetch';\n\nexport class DidTool {\n  static ACTION_PATH = {\n    OPERATIONS: 'operations',\n    IDENTIFIERS: 'identifiers',\n\n    PROOF: 'proof-of-work-challenge',\n  };\n\n  static async create(url: string, signingKeyId: string = 'signing-key') {\n    // 鍵生成\n    const [recoveryKey, recoveryPrivateKey] = await IonKey.generateEs256kOperationKeyPair();\n    const [updateKey, updatePrivateKey] = await IonKey.generateEs256kOperationKeyPair();\n    const [signingKey, signingPrivateKey] = await IonKey.generateEs256kDidDocumentKeyPair({id: signingKeyId});\n    const publicKeys = [signingKey];\n\n    // DID作成リクエスト\n    const document : IonDocumentModel = {\n      publicKeys\n    };\n    const input = { recoveryKey, updateKey, document };\n    const createRequest = IonRequest.createCreateRequest(input);\n    const longFormDid = IonDid.createLongFormDid(input);\n    const longFormSuffixData = longFormDid.substring(longFormDid.lastIndexOf(':') + 1);\n\n    const resText = await IonProofOfWork.submitIonRequest(\n      urljoin(url, DidTool.ACTION_PATH.PROOF),\n      urljoin(url, DidTool.ACTION_PATH.OPERATIONS),\n      JSON.stringify(createRequest)\n    );\n    if (!resText) {\n      return null;\n    };\n\n    // 各種パラメータ生成\n    const resObj = JSON.parse(resText);\n    const did: string = resObj.didDocument.id;\n    const didParts = did.split(':');\n    const scheme = didParts[0];\n    const didSuffix = didParts[didParts.length - 1];\n    let method = didParts[1];\n    if (didParts.length === 4) {\n      method +=  ':' +  didParts[2];\n    };\n    const published = resObj.didDocumentMetadata.method.published;\n\n    const didModel = new DidModel(\n      scheme,\n      method,\n      didSuffix,\n      longFormSuffixData,\n      signingKeyId,\n      published\n    );\n\n    return {\n      didModel: didModel,\n      signingPrivateKey: signingPrivateKey,\n      recoveryPrivateKey: recoveryPrivateKey,\n      updatePrivateKey: updatePrivateKey,\n    };\n  };\n\n  static async resolve(url: string, did: string) {\n    const res = await fetch(urljoin(url, DidTool.ACTION_PATH.IDENTIFIERS, did));\n    if (res.status !== 200) {\n      return {\n        error: {\n          status: res.status,\n          text: await res.text()\n        }\n      }\n    }\n    return await res.json();\n  }\n\n  static async save(didModel: DidModel) {\n    await dexieDb.did.put(didModel);\n  }\n\n  static async load() {\n    const didModel = await dexieDb.did.get(DidModel.ID);\n    if (didModel) {\n      return new DidModel(\n        didModel.scheme,\n        didModel.method,\n        didModel.didSuffix,\n        didModel.longFormSuffixData,\n        didModel.signingKeyId,\n        didModel.published\n      );\n    }\n    return null;\n  };\n\n  static async clear() {\n    await dexieDb.did.clear();\n  }\n};\n\nexport class PrivateKeyTool {\n  static RESERVE_ID = {\n    RECOVERY: '@RECOVERY',\n    UPDATE: '@UPDATE'\n  }\n\n  static async save(id: string, privateKey: JwkEs256k) {\n    await dexieDb.privatekey.put(new PrivateKeyModel(id, privateKey));\n  };\n  static async load(id: string) {\n    return await dexieDb.privatekey.get(id);\n  };\n  static async clear() {\n    await dexieDb.privatekey.clear();\n  }\n};\n\nexport class DidModel {\n  // did = scheme:method:didSuffix:longFormSuffixData\n  id: string;\n  scheme: string;\n  method: string;\n  didSuffix: string;\n  longFormSuffixData: string;\n  signingKeyId: string;\n  published: boolean;\n\n  constructor(\n    scheme: string = '',\n    method: string = '',\n    didSuffix: string = '',\n    longFormSuffixData: string = '',\n    signingKeyId: string = DidModel.SIGNING_KEY,\n    published = false\n    ) {\n    this.id = DidModel.ID;\n    this.scheme = scheme;\n    this.method = method;\n    this.didSuffix = didSuffix;\n    this.longFormSuffixData = longFormSuffixData;\n    this.signingKeyId = signingKeyId;\n    this.published = published;\n  };\n\n  get did() {\n    return [this.scheme, this.method, this.didSuffix].join(':');\n  }\n\n  get didLong() {\n    return [this.scheme, this.method, this.didSuffix, this.longFormSuffixData].join(':');\n  }\n\n  static ID = 'onlyid';\n  static SIGNING_KEY = 'signing-key';\n};\n\nexport class PrivateKeyModel {\n  id: string;\n  privateKey: JwkEs256k;\n\n  constructor(id: string, privateKey: JwkEs256k) {\n    this.id = id;\n    this.privateKey = privateKey;\n  };\n};","import * as React from 'react';\nimport { Typography, Container, Grid, Button, Snackbar, Alert, \n  Card, CardContent, CardActions, TextField, Chip, \n  Dialog, DialogTitle, DialogContent, DialogActions, Divider} from '@mui/material';\nimport { \n  Create as IconCreate\n} from '@mui/icons-material'\n\nimport { Settings } from '../helpers/settings';\nimport { DidTool, PrivateKeyTool } from '../helpers/didTools';\nimport { useNowLoadingContext, useSettingsContext, useDidContext } from '../layout/sideMenuLayout';\n\nexport const PageTop = () => {\n  const nowLoadingContext = useNowLoadingContext();\n  const settingsContext = useSettingsContext();\n  const didContext = useDidContext();\n\n  const [openDidCreated, setOpenDidCreated] = React.useState(false);\n  const [openDialog, setOpenDialog] = React.useState(false);\n  const [textDialog, setTextDialog] = React.useState({title:'', text:''});\n\n  const handleCloseDidCreated = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpenDidCreated(false);\n  };\n\n  /**\n   * 各種読み込み\n   */\n  const setup = async () => {\n    nowLoadingContext.setNowLoading(true);\n\n    // 設定の読み込み\n    settingsContext.setSettings(await Settings.load());\n\n    // DIDの読み込み\n    const didModel = await DidTool.load();\n    if (didModel) {\n      didContext.setDidModel(didModel);\n    }\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 500);\n  };\n\n  React.useEffect(() => {\n    if (!settingsContext.settings) {\n      setup();\n    };\n  });\n\n  const registerDid = async () => {\n    if (!settingsContext.settings) {\n      return\n    }\n    nowLoadingContext.setNowLoading(true);\n    \n    // DID発行\n    const didInfo = await DidTool.create(settingsContext.settings.urlOperation);\n    \n    if (didInfo) {\n      // 発行した各種情報を保存\n      await PrivateKeyTool.save(didInfo.didModel.signingKeyId, didInfo.signingPrivateKey);\n      await PrivateKeyTool.save(PrivateKeyTool.RESERVE_ID.RECOVERY, didInfo.recoveryPrivateKey);\n      await PrivateKeyTool.save(PrivateKeyTool.RESERVE_ID.UPDATE, didInfo.updatePrivateKey);\n      await DidTool.save(didInfo.didModel);\n\n      // コンテキストにも反映\n      didContext.setDidModel(didInfo.didModel);\n    }\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n      setOpenDidCreated(true);\n    }, 500);\n  };\n\n  const resolveDid = async () => {\n    if (!didContext.didModel) {\n      return\n    }\n    return await _resolveDid(didContext.didModel.did);\n  };\n\n  const resolveDidLong = async () => {\n    if (!didContext.didModel) {\n      return\n    }\n    return await _resolveDid(didContext.didModel.didLong);\n  };\n\n  const _resolveDid = async (did: string) => {\n    if (!settingsContext.settings) {\n      return\n    }\n    if (!didContext.didModel) {\n      return\n    }\n    nowLoadingContext.setNowLoading(true);\n\n    const resolveDid = await DidTool.resolve(settingsContext.settings.urlResolve, did);\n    if (!resolveDid.error) {\n      if (!didContext.didModel.published) {\n        if (resolveDid.didDocumentMetadata.method.published) {\n          // publishedの更新\n          didContext.didModel.published = true;\n          didContext.setDidModel(didContext.didModel);\n          await DidTool.save(didContext.didModel);\n        }\n      }\n    }\n\n    setTimeout(() => {\n      setTextDialog({\n        title: 'DID検証レスポンス',\n        text: JSON.stringify(resolveDid, null, 2)\n      });\n      setOpenDialog(true);\n      nowLoadingContext.setNowLoading(false);\n    }, 500);\n  };\n\n  const deleteDid = async () => {\n    nowLoadingContext.setNowLoading(true);\n\n    // 発行した各種情報を削除\n    await PrivateKeyTool.clear();\n    await DidTool.clear();\n\n    // コンテキストにも反映\n    didContext.setDidModel(null);\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 500);\n  };\n\n  const closeDialog = async () => {\n    setOpenDialog(false);\n  };\n\n  if (!didContext.didModel) {\n    return (\n      <>\n        <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n          <Typography variant='h5' sx={{marginBottom: '16px'}}>\n            DID\n          </Typography>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              DIDが発行されていません。\n            </Grid>\n            <Grid container item xs={12} justifyContent='center'>\n              <Button variant='contained' size='large' startIcon={<IconCreate />} onClick={registerDid}>DID発行</Button>\n            </Grid>\n          </Grid>\n        </Container>\n        <Snackbar open={openDidCreated} autoHideDuration={6000} onClose={handleCloseDidCreated}>\n          <Alert onClose={handleCloseDidCreated} severity=\"success\" sx={{ width: '100%' }}>\n            DIDを発行しました。\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  const published = didContext.didModel.published ? <Chip label='公開済' color='success' /> : <Chip label='未公開' color='warning' />;\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          DID\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <Card variant='outlined'>\n              <CardContent>\n                <TextField\n                  label='DID'\n                  fullWidth\n                  multiline\n                  value={didContext.didModel.did}\n                  InputProps={{\n                    readOnly: true,\n                  }}\n                />\n                <Container fixed sx={{marginTop: '8px', textAlign: 'right'}} >\n                  {published}\n                </Container>\n              </CardContent>\n              <Divider sx={{marginX: '8px'}} />\n              <CardActions>\n                <Button size='small' onClick={resolveDid}>DIDを検証</Button>\n                <Button size='small' onClick={resolveDidLong}>DID(Long)を検証</Button>\n                <Button size='small' color='error' onClick={deleteDid}>削除</Button>\n              </CardActions>\n            </Card>\n          </Grid>\n        </Grid>\n      </Container>\n      <Snackbar open={openDidCreated} autoHideDuration={6000} onClose={handleCloseDidCreated}>\n        <Alert onClose={handleCloseDidCreated} severity=\"success\" sx={{ width: '100%' }}>\n          DIDを発行しました。\n        </Alert>\n      </Snackbar>\n      <Dialog\n        fullWidth={true}\n        maxWidth='sm'\n        open={openDialog}\n        aria-labelledby=\"responsive-dialog-title\"\n      >\n        <DialogTitle id=\"responsive-dialog-title\">\n          {textDialog.title}\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            label='DID'\n            fullWidth\n            multiline\n            maxRows={16}\n            value={textDialog.text}\n            InputProps={{\n              readOnly: true,\n              sx: {fontSize: '11px'}\n            }}\n            sx={{ marginTop: '8px' }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeDialog} autoFocus>\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}","import * as React from 'react';\nimport { Typography, Container, Card, CardContent } from '@mui/material';\nimport { QrReader } from 'react-qr-reader';\n\nexport const PageQr = () => {\n  const [qrText, setQrText] = React.useState('');\n\n  const qr = (\n    <QrReader\n      constraints={{ facingMode: 'environment' }}\n      onResult={(result) => {\n        if (result) {\n          console.log(result);\n          setQrText(result.getText());\n        }\n      }}\n    />\n  );\n\n  const qrResult = (\n    <Card variant='outlined'>\n      <CardContent>\n        <Typography variant='h6'>\n          QR読み取り結果\n        </Typography>\n        <Typography sx={{wordWrap: 'break-word', marginTop: '16px'}}>\n          { qrText }\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          QR読み取り\n        </Typography>\n        <Container maxWidth='sm'>\n          { !qrText && qr }\n          { qrText && qrResult }\n        </Container>\n      </Container>\n    </>\n  );\n}","import * as React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Typography, Container, TextField, Accordion, AccordionSummary, AccordionDetails} from '@mui/material';\nimport { \n  ExpandMore as IconExpandMore\n} from '@mui/icons-material'\nimport { useDidContext } from '../layout/sideMenuLayout';\nimport { PrivateKeyTool } from '../helpers/didTools';\n\nexport const PageDid = () => {\n  const didContext = useDidContext();\n  const [privateKeys, setPrivateKeys] = React.useState({signing:'', recovery:'', update:''});\n\n  const setup = async () => {\n    if (didContext.didModel) {\n      setPrivateKeys({\n        signing: JSON.stringify((await PrivateKeyTool.load(didContext.didModel.signingKeyId))?.privateKey, null, 2),\n        recovery: JSON.stringify((await PrivateKeyTool.load(PrivateKeyTool.RESERVE_ID.RECOVERY))?.privateKey, null, 2),\n        update: JSON.stringify((await PrivateKeyTool.load(PrivateKeyTool.RESERVE_ID.UPDATE))?.privateKey, null, 2)\n      });\n    };\n  };\n\n  React.useEffect(() => {\n    if (!privateKeys.signing) {\n      setup();\n    }\n  });\n\n  if (!didContext.didModel) {\n    return (<Navigate to=\"/\" replace />);\n  };\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          DID詳細\n        </Typography>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>DID(Long)</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='DID(Long)'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={didContext.didModel.didLong}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>SigningPrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='SigningPrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.signing}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>RecoveryPrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='RecoveryPrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.recovery}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>UpdatePrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='UpdatePrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.update}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        \n      </Container>\n    </>\n  );\n}","import * as React from 'react';\nimport { Typography, Container, Grid, Button, TextField, Snackbar, Alert } from '@mui/material';\nimport { Save as IconSave } from '@mui/icons-material'\n\nimport { Settings } from '../helpers/settings';\n\nexport const PageSettings = () => {\n  const [open, setOpen] = React.useState(false);\n  const [urlOperation, setUrlOperation] = React.useState('');\n  const [urlResolve, setUrlResolve] = React.useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (e.target.id) {\n      case 'url-operation':\n        setUrlOperation(() => e.target.value)\n        break;\n      case 'url-resolve':\n        setUrlResolve(() => e.target.value)\n        break;\n    }\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  const saveSettings = async () => {\n    // 設定の保存\n    const settings = new Settings();\n    settings.urlOperation = urlOperation;\n    settings.urlResolve = urlResolve;\n    await settings.save();\n    \n    handleOpen();\n  };\n\n  const resetSettings = async () => {\n    await Settings.clear();\n    const settings = new Settings();\n    setUrlOperation(settings.urlOperation);\n    setUrlResolve(settings.urlResolve);\n  };\n\n  React.useEffect(() => {\n    // 設定の読み込み\n    Settings.load().then((settings) => {\n      setUrlOperation(settings.urlOperation);\n      setUrlResolve(settings.urlResolve);\n    });\n  },[])\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          Settings\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <TextField id='url-operation' fullWidth label='Operation URL' variant='outlined' value={urlOperation} onChange={handleChange} />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField id='url-resolve' fullWidth label='Resolve URL' variant='outlined' value={urlResolve} onChange={handleChange} />\n          </Grid>\n          <Grid item xs={8}>\n            <Button fullWidth variant='contained' startIcon={<IconSave />} onClick={saveSettings}>保存</Button>\n          </Grid>\n          <Grid item xs={4}>\n            <Button fullWidth variant='contained' color='error' onClick={resetSettings}>リセット</Button>\n          </Grid>\n        </Grid>\n      </Container>\n      <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\n        <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\n          設定を保存しました。\n        </Alert>\n      </Snackbar>\n    </>\n  );\n}","import { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './App.css';\nimport { SideMenuLayout } from './layout/sideMenuLayout';\nimport { PageTop } from './pages/top';\nimport { PageQr } from './pages/qr';\nimport { PageDid } from './pages/did'\nimport { PageSettings } from './pages/settings'\n\nconst App = () => {\n  return <BrowserRouter>\n    <Routes>\n      <Route element={<SideMenuLayout />}>\n        <Route index element={<PageTop />} />\n        <Route path='qr' element={<PageQr />} />\n        <Route path='did' element={<PageDid />} />\n\n        <Route path='settings' element={<PageSettings />} />\n      </Route>\n    </Routes>\n  </BrowserRouter>;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        // 以下3行を追加\n        if (registration.waiting && config && config.onUpdate) {\n          config.onUpdate(registration);\n        }\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          } else if (installingWorker.state === 'activated') {\n            window.location.reload();\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useState } from 'react';\nimport { Button, Dialog, DialogTitle, DialogContent, DialogActions, DialogContentText} from '@mui/material';\n\nexport const SWUpdateDialog: React.FC<{ registration: ServiceWorkerRegistration }> = ({ registration }) => {\n  const [show, setShow] = useState(!!registration.waiting);\n  const handleUpdate = () => {\n    registration.waiting?.postMessage({ type: 'SKIP_WAITING' });\n    setShow(false);\n    //window.location.reload();\n  };\n\n  return (\n    <Dialog open={show}>\n      <DialogTitle style={{textAlign: \"center\"}}>\n        アップデート通知\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          新しいバージョンがリリースされました。\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions sx={{justifyContent: \"center\"}}>\n        <Button onClick={handleUpdate}>アップデート</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { SWUpdateDialog } from './ServiceWorkerUpdateDialog';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\n//serviceWorkerRegistration.unregister();\nserviceWorkerRegistration.register({\n  onUpdate: registration => {\n    if (registration.waiting) {\n      ReactDOM.render(<SWUpdateDialog registration={registration} />, document.querySelector('.SW-update-dialog'));\n    }\n  },\n});\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}