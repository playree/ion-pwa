{"version":3,"sources":["layout/sideMenuLayout.tsx","dexie.ts","helpers/settings.ts","helpers/didTools.ts","pages/top.tsx","pages/qr.tsx","pages/did.tsx","pages/vc.tsx","pages/openid.tsx","pages/settings.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","ServiceWorkerUpdateDialog.tsx","index.tsx"],"names":["drawerWidth","Main","styled","shouldForwardProp","prop","theme","open","flexGrow","padding","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","easeOut","enteringScreen","AppBar","MuiAppBar","width","DrawerHeader","display","alignItems","mixins","toolbar","justifyContent","menulink","textDecorationLine","color","fontWeight","NowLoadingContext","React","useNowLoadingContext","SettingsContext","useSettingsContext","DidContext","useDidContext","SideMenuLayout","useTheme","setOpen","isNowLoading","setNowLoading","settings","setSettings","handleDrawerClose","nowLoadingValue","settingsValue","didValue","didModel","setDidModel","Box","sx","CssBaseline","position","Toolbar","minHeight","IconButton","onClick","edge","mr","Typography","variant","noWrap","component","Drawer","flexShrink","boxSizing","anchor","direction","Divider","List","to","style","ListItem","button","ListItemIcon","minWidth","ListItemText","primary","fontSize","Provider","value","height","paddingX","Backdrop","zIndex","drawer","CircularProgress","className","SettingsModel","key","this","KEYS","URL_OPERATION","URL_RESOLVE","didlong","signingPrivateKey","recoveryPrivateKey","updatePrivateKey","KEY","dexieDb","Dexie","version","stores","did","privatekey","vc","Settings","urlOperation","urlResolve","get","dbUrlOperation","dbUrlResolve","put","load","clear","DidTool","url","keyid","signingKeyId","VerifiableTool","generateKid","IonKey","generateEs256kOperationKeyPair","recoveryKey","updateKey","generateEs256kDidDocumentKeyPair","id","signingKey","purposes","IonPublicKeyPurpose","Authentication","input","document","publicKeys","createRequest","IonRequest","createCreateRequest","longFormDid","IonDid","createLongFormDid","longFormSuffixData","substring","lastIndexOf","IonProofOfWork","submitIonRequest","urljoin","ACTION_PATH","PROOF","OPERATIONS","JSON","stringify","resText","resObj","parse","didDocument","didParts","split","scheme","didSuffix","length","method","published","didDocumentMetadata","DidModel","fetch","IDENTIFIERS","res","status","text","error","json","ID","PrivateKeyTool","privateKey","PrivateKeyModel","RESERVE_ID","RECOVERY","UPDATE","didShort","didLong","join","VcModel","VcTool","toArray","jwsString","jwsParse","header","base64url","decode","payload","jws","jwk","sha256","createHash","jwkString","crv","kty","x","y","hash","update","digest","encode","toBase64","Date","toString","privateJwk","ES256K","sign","Error","publicJwk","verify","jwtObj","resolveUrl","kid","vid","resolve","didInfo","verificationMethod","s","vm","publicKeyJwk","verifyJws","PageTop","nowLoadingContext","settingsContext","didContext","openDidCreated","setOpenDidCreated","openDialog","setOpenDialog","title","textDialog","setTextDialog","setup","handleCloseDidCreated","event","reason","setTimeout","registerDid","save","resolveDid","_resolveDid","resolveDidLong","deleteDid","closeDialog","Container","maxWidth","marginBottom","Grid","container","item","xs","Button","size","startIcon","Snackbar","autoHideDuration","onClose","Alert","severity","Chip","label","Card","CardContent","TextField","fullWidth","multiline","InputProps","readOnly","fixed","marginTop","textAlign","marginX","CardActions","Dialog","DialogTitle","DialogContent","maxRows","DialogActions","autoFocus","STATUS","PageQr","setStatus","qrText","setQrText","inputText","setInputText","navigate","useNavigate","replace","manualInput","startOpenid","requestUrl","indexOf","alert","qr","constraints","facingMode","onResult","result","console","log","getText","qrResult","wordWrap","onChange","e","target","PageDid","signing","recovery","privateKeys","setPrivateKeys","Accordion","AccordionSummary","expandIcon","AccordionDetails","PageVc","vcList","setVcList","all","items","cnt","push","PageOpenid","param","useParams","inputPin","setInputPin","credentialOffer","vcExpert","vcProcess","setVcProcess","vpProcess","setVpProcess","handleProc","procVc","issueVc2","parsed","QueryString","URL","query","request_uri","searchParams","append","window","location","href","getCredentialOffer","response","body","jwt","decodeJws","verifyJwsByDid","getVCExpert","resJson","token","prompt","issueVc","verifyVc","message","manifestUrl","claims","vp_token","presentation_definition","input_descriptors","issuance","manifest2","addVC","now","Math","floor","credentialRequest","alg","typ","iss","aud","credentialIssuer","contract","iat","exp","sub_jwk","sub","generateSub","jti","uuid","pin","generateHash","attestations","idTokens","id_token_hint","privateKeyModel","signJws","credentialRequestJws","mode","cache","sendVP","idToken","client_id","nonce","_vp_token","presentation_submission","definition_id","descriptor_map","format","path","idTokenJws","vpToken","nbf","vp","type","verifiableCredential","vpTokenJws","params","URLSearchParams","state","redirect_uri","bgcolor","card","backgroundColor","CardHeader","avatar","Avatar","src","logo","uri","textColor","consent","inputProps","inputMode","pattern","PageSettings","setUrlOperation","setUrlResolve","handleChange","handleClose","saveSettings","resetSettings","then","App","element","index","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","waiting","onUpdate","installingWorker","installing","onstatechange","controller","onSuccess","reload","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","SWUpdateDialog","useState","show","setShow","DialogContentText","postMessage","ReactDOM","render","StrictMode","getElementById","process","origin","addEventListener","headers","contentType","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration","querySelector"],"mappings":"gnBAsBMA,EAAc,IAEdC,EAAOC,YAAO,OAAQ,CAAEC,kBAAmB,SAACC,GAAD,MAAmB,SAATA,IAA9CF,EAEV,gBAAGG,EAAH,EAAGA,MAAOC,EAAV,EAAUA,KAAV,oBACDC,SAAU,EACVC,QAASH,EAAMI,QAAQ,GACvBC,WAAYL,EAAMM,YAAYC,OAAO,SAAU,CAC7CC,OAAQR,EAAMM,YAAYE,OAAOC,MACjCC,SAAUV,EAAMM,YAAYI,SAASC,gBAEvCC,WAAW,IAAD,OAAMjB,EAAN,OACNM,GAAQ,CACVI,WAAYL,EAAMM,YAAYC,OAAO,SAAU,CAC7CC,OAAQR,EAAMM,YAAYE,OAAOK,QACjCH,SAAUV,EAAMM,YAAYI,SAASI,iBAEvCF,WAAY,OAQVG,EAASlB,YAAOmB,IAAW,CAC/BlB,kBAAmB,SAACC,GAAD,MAAmB,SAATA,IADhBF,EAEC,gBAAGG,EAAH,EAAGA,MAAOC,EAAV,EAAUA,KAAV,oBACdI,WAAYL,EAAMM,YAAYC,OAAO,CAAC,SAAU,SAAU,CACxDC,OAAQR,EAAMM,YAAYE,OAAOC,MACjCC,SAAUV,EAAMM,YAAYI,SAASC,iBAEnCV,GAAQ,CACVgB,MAAM,eAAD,OAAiBtB,EAAjB,OACLiB,WAAW,GAAD,OAAKjB,EAAL,MACVU,WAAYL,EAAMM,YAAYC,OAAO,CAAC,SAAU,SAAU,CACxDC,OAAQR,EAAMM,YAAYE,OAAOK,QACjCH,SAAUV,EAAMM,YAAYI,SAASI,sBAKrCI,EAAerB,YAAO,MAAPA,EAAc,gBAAGG,EAAH,EAAGA,MAAH,mBAAC,aAClCmB,QAAS,OACTC,WAAY,SACZjB,QAASH,EAAMI,QAAQ,EAAG,IAEvBJ,EAAMqB,OAAOC,SALiB,IAMjCC,eAAgB,gBAGZC,EAAW,CACfC,mBAAoB,OACpBC,MAAO,OACPC,WAAY,QAQRC,EAAoBC,gBAA2C,IACxDC,EAAuB,WAClC,OAAOD,aAAwCD,IAQ3CG,EAAkBF,gBAAyC,IACpDG,EAAqB,WAChC,OAAOH,aAAsCE,IAQzCE,EAAaJ,gBAAoC,IAC1CK,EAAgB,WAC3B,OAAOL,aAAiCI,IAG7BE,EAAiB,WAC5B,IAAMnC,EAAQoC,cACd,EAAwBP,YAAe,GAAvC,mBAAO5B,EAAP,KAAaoC,EAAb,KACA,EAAsCR,YAAe,GAArD,mBAAOS,EAAP,KAAqBC,EAArB,KACA,EAAgCV,WAAgC,MAAhE,mBAAOW,EAAP,KAAiBC,EAAjB,KACA,EAAgCZ,WAAgC,MAAhE,mBAMMa,EAAoB,WACxBL,GAAQ,IAGJM,EAAyC,CAAEL,eAAcC,iBACzDK,EAAqC,CAAEJ,WAAUC,eACjDI,GAA2B,CAAEC,SAZnC,KAY6CC,YAZ7C,MAcA,OACE,eAACC,EAAA,EAAD,CAAKC,GAAI,CAAE9B,QAAS,QAApB,UACE,cAAC+B,EAAA,EAAD,IACA,cAAC,EAAD,CAAQC,SAAS,QAAQlD,KAAMA,EAA/B,SACE,eAACmD,EAAA,EAAD,CAASH,GAAI,CAACI,UAAW,QAAzB,UACE,cAACC,EAAA,EAAD,CACE5B,MAAM,UACN,aAAW,cACX6B,QApBe,WACvBlB,GAAQ,IAoBAmB,KAAK,QACLP,GAAE,aAAIQ,GAAI,GAAOxD,GAAQ,CAAEkB,QAAS,SALtC,SAOE,cAAC,IAAD,MAEF,cAACuC,EAAA,EAAD,CAAYC,QAAQ,KAAKC,QAAM,EAACC,UAAU,MAA1C,iCAKJ,eAACC,EAAA,EAAD,CACEb,GAAI,CACFhC,MAAOtB,EACPoE,WAAY,EACZ,qBAAsB,CACpB9C,MAAOtB,EACPqE,UAAW,eAGfL,QAAQ,aACRM,OAAO,OACPhE,KAAMA,EAXR,UAaE,cAACiB,EAAD,UACE,cAACoC,EAAA,EAAD,CAAYC,QAASb,EAArB,SACuB,QAApB1C,EAAMkE,UAAsB,cAAC,IAAD,IAAsB,cAAC,IAAD,QAGvD,cAACC,EAAA,EAAD,IAEA,eAACC,EAAA,EAAD,WACE,cAAC,IAAD,CAASC,GAAG,IAAIC,MAAO9C,EAAU+B,QAASb,EAA1C,SACE,eAAC6B,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,CAAcxB,GAAI,CAACyB,SAAU,QAA7B,SAAsC,cAAC,IAAD,MACtC,cAACC,EAAA,EAAD,CAAcC,QAAQ,4BAG1B,cAAC,IAAD,CAASP,GAAG,OAAOC,MAAO9C,EAAU+B,QAASb,EAA7C,SACE,eAAC6B,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,CAAcxB,GAAI,CAACyB,SAAU,QAA7B,SAAsC,cAAC,IAAD,MACtC,cAACC,EAAA,EAAD,CAAcC,QAAQ,oCAG1B,cAAC,IAAD,CAASP,GAAG,QAAQC,MAAO9C,EAAU+B,QAASb,EAA9C,SACE,eAAC6B,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,CAAcxB,GAAI,CAACyB,SAAU,QAA7B,SAAsC,cAAC,IAAD,MACtC,cAACC,EAAA,EAAD,CAAcC,QAAQ,yBAG1B,cAAC,IAAD,CAASP,GAAG,OAAOC,MAAO9C,EAAU+B,QAASb,EAA7C,SACE,eAAC6B,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,CAAcxB,GAAI,CAACyB,SAAU,QAA7B,SAAsC,cAAC,IAAD,MACtC,cAACC,EAAA,EAAD,CAAcC,QAAQ,2BAI5B,cAACT,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,UACE,cAAC,IAAD,CAASC,GAAG,aAAaC,MAAO9C,EAAU+B,QAASb,EAAnD,SACE,eAAC6B,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,CAAcxB,GAAI,CAACyB,SAAU,QAA7B,SAAsC,cAAC,IAAD,MACtC,cAACC,EAAA,EAAD,CAAcC,QAAQ,wBAI5B,cAACT,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,UACE,eAACG,EAAA,EAAD,CAAUtB,GAAI,CAAC4B,SAAU,OAAQnD,MAAO,QAAxC,oBAvLM,uBA6LV,cAACE,EAAkBkD,SAAnB,CAA4BC,MAAOpC,EAAnC,SACE,cAACZ,EAAgB+C,SAAjB,CAA0BC,MAAOnC,EAAjC,SACE,eAACX,EAAW6C,SAAZ,CAAqBC,MAAOlC,GAA5B,UACE,eAACjD,EAAD,CAAM2D,QAASb,EAAmBO,GAAI,CAAC+B,OAAQ,QAAS/D,MAAO,OAAQgE,SAAU,OAAjF,UACE,cAAC/D,EAAD,CAAc+B,GAAI,CAACI,UAAW,UAC9B,cAAC,IAAD,OAEF,cAAC6B,EAAA,EAAD,CACEjC,GAAI,CAAEvB,MAAO,OAAQyD,OAAQ,SAACnF,GAAD,OAAWA,EAAMmF,OAAOC,OAAS,IAC9DnF,KAAM0C,EAAgBL,aAFxB,SAIE,cAAC+C,EAAA,EAAD,CAAkB3D,MAAM,qBAKhC,qBAAK4D,UAAU,yB,6LC1NRC,GAAb,cAGE,WAAYC,EAAaT,GAAa,0BAFtCS,SAEqC,OADrCT,WACqC,EACnCU,KAAKD,IAAMA,EACXC,KAAKV,MAAQA,KALJQ,GAQJG,KAAO,CACZC,cAAe,gBACfC,YAAa,eAIjB,cAME,WACEJ,EACAK,EACAC,EACAC,EACAC,GACG,0BAXLR,SAWI,OAVJK,aAUI,OATJC,uBASI,OARJC,wBAQI,OAPJC,sBAOI,EACFP,KAAKD,IAAMA,EACXC,KAAKI,QAAUA,EACfJ,KAAKK,kBAAoBA,EACzBL,KAAKM,mBAAqBA,EAC1BN,KAAKO,iBAAmBA,KAGnBC,IAAM,MASR,IAAMC,GAAU,IAAIC,KAAM,aAEjCD,GAAQE,QA/Ce,GA+CSC,OAAO,CACrC7D,SAAU,MACV8D,IAAK,KACLC,WAAY,KACZC,GAAI,SCvDC,IAAMC,GAAb,WAIE,aAAc,0BAHdC,kBAGa,OAFbC,gBAEa,EAEXlB,KAAKiB,aAAe,4CACpBjB,KAAKkB,WAAa,+CAPtB,0FAUE,gHAE+BT,GAAQ1D,SAASoE,IAAIrB,GAAcG,KAAKC,eAFvE,cAEQkB,EAFR,UAIIpB,KAAKiB,aAAeG,EAAe9B,OAJvC,SAM6BmB,GAAQ1D,SAASoE,IAAIrB,GAAcG,KAAKE,aANrE,QAMQkB,EANR,UAQIrB,KAAKkB,WAAaG,EAAa/B,OARnC,gDAVF,yHAsBE,wGAEQmB,GAAQ1D,SAASuE,IAAI,IAAIxB,GAAcA,GAAcG,KAAKC,cAAeF,KAAKiB,eAFtF,uBAGQR,GAAQ1D,SAASuE,IAAI,IAAIxB,GAAcA,GAAcG,KAAKE,YAAaH,KAAKkB,aAHpF,gDAtBF,2HA4BE,qGACQnE,EAAW,IAAIiE,EADvB,SAEQjE,EAASwE,OAFjB,gCAGSxE,GAHT,2CA5BF,0HAkCE,wGACQ0D,GAAQ1D,SAASyE,QADzB,2CAlCF,6D,iGCQaC,GAAb,8IAQE,WAAoBC,GAApB,wJAAiCC,EAAjC,+BAAiD,GACzCC,EAAeD,GAAgBE,GAAeC,cADtD,SAIkDC,UAAOC,iCAJzD,0CAISC,EAJT,KAIsB3B,EAJtB,eAK8CyB,UAAOC,iCALrD,2CAKSE,EALT,KAKoB3B,EALpB,eAMgDwB,UAAOI,iCAAiC,CAACC,GAAIR,IAN7F,2CAMSS,EANT,KAMqBhC,EANrB,KASEgC,EAAWC,SAAW,CAACC,uBAAoBC,gBAOrCC,EAAQ,CAAER,cAAaC,YAAWQ,SAHJ,CAClCC,WAJiB,CAACN,KAOdO,EAAgBC,cAAWC,oBAAoBL,GAC/CM,EAAcC,UAAOC,kBAAkBR,GACvCS,EAAqBH,EAAYI,UAAUJ,EAAYK,YAAY,KAAO,GAnBlF,UAqBwBC,KAAeC,iBACnCC,aAAQ7B,EAAKD,EAAQ+B,YAAYC,OACjCF,aAAQ7B,EAAKD,EAAQ+B,YAAYE,YACjCC,KAAKC,UAAUhB,IAxBnB,WAqBQiB,EArBR,iDA2BW,MA3BX,eA+BQC,EAASH,KAAKI,MAAMF,GACpBhD,EAAciD,EAAOE,YAAY5B,GACjC6B,EAAWpD,EAAIqD,MAAM,KACrBC,EAASF,EAAS,GAClBG,EAAYH,EAASA,EAASI,OAAS,GACzCC,EAASL,EAAS,GACE,IAApBA,EAASI,SACXC,GAAW,IAAOL,EAAS,IAEvBM,EAAYT,EAAOU,oBAAoBF,OAAOC,UAE9ClH,EAAW,IAAIoH,GACnBN,EACAG,EACAF,EACAlB,EACAtB,EACA2C,GAhDJ,kBAmDS,CACLlH,SAAUA,EACVgD,kBAAmBA,EACnBC,mBAAoBA,EACpBC,iBAAkBA,IAvDtB,4CARF,6HAmEE,WAAqBmB,EAAab,GAAlC,iGACoB6D,iBAAMnB,aAAQ7B,EAAKD,EAAQ+B,YAAYmB,YAAa9D,IADxE,UAEqB,OADb+D,EADR,QAEUC,OAFV,6BAKgBD,EAAIC,OALpB,SAMoBD,EAAIE,OANxB,gCAKQD,OALR,KAMQC,KANR,yBAIMC,MAJN,gCAUeH,EAAII,OAVnB,qFAnEF,4HAgFE,WAAkB3H,GAAlB,2FACQoD,GAAQI,IAAIS,IAAIjE,GADxB,2CAhFF,0HAoFE,8GACyBoD,GAAQI,IAAIM,IAAIsD,GAASQ,IADlD,YACQ5H,EADR,iDAGW,IAAIoH,GACTpH,EAAS8G,OACT9G,EAASiH,OACTjH,EAAS+G,UACT/G,EAAS6F,mBACT7F,EAASuE,aACTvE,EAASkH,YATf,gCAYS,MAZT,2CApFF,0HAmGE,wGACQ9D,GAAQI,IAAIW,QADpB,2CAnGF,6DAAaC,GACJ+B,YAAc,CACnBE,WAAY,aACZiB,YAAa,cAEblB,MAAO,2BAmGJ,IAAMyB,GAAb,4IAME,WAAkB9C,EAAY+C,GAA9B,2FACQ1E,GAAQK,WAAWQ,IAAI,IAAI8D,GAAgBhD,EAAI+C,IADvD,2CANF,4HASE,WAAkB/C,GAAlB,2FACe3B,GAAQK,WAAWK,IAAIiB,GADtC,mFATF,2HAYE,wGACQ3B,GAAQK,WAAWU,QAD3B,2CAZF,6DAAa0D,GACJG,WAAa,CAClBC,SAAU,YACVC,OAAQ,WAcL,IAAMd,GAAb,WAUE,WACEN,EACAG,EACAF,EACAlB,EACAtB,GAEG,IADH2C,EACE,kFAfJnC,QAeI,OAdJ+B,YAcI,OAbJG,YAaI,OAZJF,eAYI,OAXJlB,wBAWI,OAVJtB,kBAUI,OATJ2C,eASI,EACFvE,KAAKoC,GAAKqC,EAASQ,GACnBjF,KAAKmE,OAASA,EACdnE,KAAKsE,OAASA,EACdtE,KAAKoE,UAAYA,EACjBpE,KAAKkD,mBAAqBA,EAC1BlD,KAAK4B,aAAeA,EACpB5B,KAAKuE,UAAYA,EAxBrB,sCA2BE,WACE,OAAOvE,KAAKuE,UAAYvE,KAAKwF,SAAWxF,KAAKyF,UA5BjD,oBA+BE,WACE,MAAO,CAACzF,KAAKmE,OAAQnE,KAAKsE,OAAQtE,KAAKoE,WAAWsB,KAAK,OAhC3D,mBAmCE,WACE,MAAO,CAAC1F,KAAKmE,OAAQnE,KAAKsE,OAAQtE,KAAKoE,UAAWpE,KAAKkD,oBAAoBwC,KAAK,OApCpF,eAuCE,WACE,MAAM,GAAN,OAAU1F,KAAKa,IAAf,YAAsBb,KAAK4B,kBAxC/B,KAAa6C,GA2CJQ,GAAK,SAGP,IAAMG,GAAb,cAIE,WAAYhD,EAAY+C,GAAwB,0BAHhD/C,QAG+C,OAF/C+C,gBAE+C,EAC7CnF,KAAKoC,GAAKA,EACVpC,KAAKmF,WAAaA,KAITQ,GAAb,cAIE,WAAY5E,GAAgB,0BAH5BqB,QAG2B,OAF3BrB,QAE2B,EACzBf,KAAKe,GAAKA,KAID6E,GAAb,4IACE,WAAkB7E,GAAlB,2FACQN,GAAQM,GAAGO,IAAI,IAAIqE,GAAQ5E,IADnC,2CADF,yHAIE,wGACeN,GAAQM,GAAG8E,UAD1B,mFAJF,0HAOE,wGACQpF,GAAQM,GAAGS,QADnB,2CAPF,6DAYaK,GAAb,gGACE,SAAiBiE,GACf,IAAMC,EAAWD,EAAU5B,MAAM,KACjC,MAAO,CACL8B,OAAQrC,KAAKI,MAAMkC,KAAUC,OAAOH,EAAS,KAC7CI,QAASxC,KAAKI,MAAMkC,KAAUC,OAAOH,EAAS,KAC9CK,IAAKN,KANX,yBAUE,SAAmBO,GACjB,IAAMC,EAASC,sBAAW,UACpBC,EAAS,kBAAcH,EAAII,IAAlB,oBAAiCJ,EAAIK,IAArC,kBAAkDL,EAAIM,EAAtD,kBAAiEN,EAAIO,EAArE,MACTC,EAAOP,EAAOQ,OAAON,GAAWO,SACtC,OAAOd,KAAUe,OAAOH,KAd5B,0BAiBE,SAAoB/B,GAClB,IACM+B,EADSN,sBAAW,UACNO,OAAOhC,GAAMiC,SACjC,OAAOd,KAAUgB,SAAShB,KAAUe,OAAOH,MApB/C,yBAuBE,WAEE,OADYN,sBAAW,OACZO,QAAO,IAAII,MAAOC,YAAYJ,OAAO,SAzBpD,2BA4BE,WACE,IACMF,EADMN,sBAAW,OACNO,QAAO,IAAII,MAAOC,YAAYJ,SAC/C,OAAOd,KAAUgB,SAAShB,KAAUe,OAAOH,MA/B/C,sEAkCE,WAAqBb,EAAaG,EAAciB,GAAhD,gFACSA,EAAWX,IADpB,OAES,cAFT,+CAGaY,UAAOC,KAAKnB,EAASiB,EAAYpB,IAH9C,aAImB,IAAIuB,MAAM,kCAJ7B,kDAlCF,mIA0CE,WAAuBnB,EAAaoB,GAApC,gFACSA,EAAUf,IADnB,OAES,cAFT,+CAGaY,UAAOI,OAAOrB,EAAKoB,IAHhC,aAImB,IAAID,MAAM,kCAJ7B,kDA1CF,sIAkDE,WAA4BG,EAAmBC,GAA/C,mHAGuBD,EAAO1B,OAAO4B,IAAI1D,MAAM,KAH/C,mBAGWrD,EAHX,KAGgBgH,EAHhB,cAM0BpG,GAAQqG,QAAQH,EAAY9G,GANtD,OAMUkH,EANV,sBAQqBA,EAAQ/D,YAAYgE,oBARzC,WAAAC,IAAA,8CAQeC,EARf,SASa9F,KAAQ,IAAMyF,EAT3B,wBAUQxB,EAAM6B,EAAGC,aAVjB,uKAcS9B,EAdT,2CAea,GAfb,yBAmBiBxE,EAAeuG,UAAUV,EAAOtB,IAAKC,GAnBtD,qGAqBW,GArBX,+EAlDF,gECpMagC,GAAU,WACrB,IAAMC,EAAoBjM,IACpBkM,EAAkBhM,IAClBiM,EAAa/L,IAEnB,EAA4CL,YAAe,GAA3D,mBAAOqM,EAAP,KAAuBC,EAAvB,KACA,EAAoCtM,YAAe,GAAnD,mBAAOuM,EAAP,KAAmBC,EAAnB,KACA,EAAoCxM,WAAe,CAACyM,MAAM,GAAI/D,KAAK,KAAnE,mBAAOgE,EAAP,KAAmBC,EAAnB,KAEA3M,aAAgB,WAId,OAHKmM,EAAgBxL,UACnBiM,IAEK,gBAKT,IAAMC,EAAwB,SAACC,EAAsCC,GACpD,cAAXA,GAGJT,GAAkB,IAMdM,EAAK,iDAAG,qGACZV,EAAkBxL,eAAc,GADpB,KAIZyL,EAJY,SAIsBvH,GAASO,OAJ/B,+BAIIvE,YAJJ,yBAOWyE,GAAQF,OAPnB,QAONlE,EAPM,SASVmL,EAAWlL,YAAYD,GAGzB+L,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KAdS,4CAAH,qDAiBLuM,EAAW,iDAAG,iGACbd,EAAgBxL,SADH,wDAIlBuL,EAAkBxL,eAAc,GAJd,SAOI2E,GAAQ3G,OAAOyN,EAAgBxL,SAASkE,aAAc,oBAP1D,YAOZ8G,EAPY,yCAWV7C,GAAeoE,KAAKvB,EAAQ1K,SAASuE,aAAcmG,EAAQ1H,mBAXjD,wBAYV6E,GAAeoE,KAAKpE,GAAeG,WAAWC,SAAUyC,EAAQzH,oBAZtD,yBAaV4E,GAAeoE,KAAKpE,GAAeG,WAAWE,OAAQwC,EAAQxH,kBAbpD,yBAcVkB,GAAQ6H,KAAKvB,EAAQ1K,UAdX,QAiBhBmL,EAAWlL,YAAYyK,EAAQ1K,UAjBf,QAoBlB+L,YAAW,WACTd,EAAkBxL,eAAc,GAChC4L,GAAkB,KACjB,KAvBe,4CAAH,qDA0BXa,EAAU,iDAAG,2FACZf,EAAWnL,SADC,iEAIJmM,EAAYhB,EAAWnL,SAASmI,UAJ5B,mFAAH,qDAOViE,EAAc,iDAAG,2FAChBjB,EAAWnL,SADK,iEAIRmM,EAAYhB,EAAWnL,SAASoI,SAJxB,mFAAH,qDAOd+D,EAAW,iDAAG,WAAO3I,GAAP,oFACb0H,EAAgBxL,SADH,oDAIbyL,EAAWnL,SAJE,wDAOlBiL,EAAkBxL,eAAc,GAPd,SASO2E,GAAQqG,QAAQS,EAAgBxL,SAASmE,WAAYL,GAT5D,WASZ0I,EATY,QAUFxE,MAVE,oBAWXyD,EAAWnL,SAASkH,UAXT,qBAYVgF,EAAW/E,oBAAoBF,OAAOC,UAZ5B,wBAcZiE,EAAWnL,SAASkH,WAAY,EAChCiE,EAAWlL,YAAYkL,EAAWnL,UAftB,UAgBNoE,GAAQ6H,KAAKd,EAAWnL,UAhBlB,QAqBlB+L,YAAW,WACTL,EAAc,CACZF,MAAO,gDACP/D,KAAMnB,KAAKC,UAAU2F,EAAY,KAAM,KAEzCX,GAAc,GACdN,EAAkBxL,eAAc,KAC/B,KA5Be,4CAAH,sDA+BX4M,EAAS,iDAAG,+FAChBpB,EAAkBxL,eAAc,GADhB,SAIV8I,GAAOpE,QAJG,uBAKV0D,GAAe1D,QALL,uBAMVC,GAAQD,QANE,OAShBgH,EAAWlL,YAAY,MAEvB8L,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KAba,2CAAH,qDAgBT6M,EAAW,iDAAG,wFAClBf,GAAc,GADI,2CAAH,qDAIjB,IAAKJ,EAAWnL,SACd,OACE,qCACE,eAACuM,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,iBAGA,eAACC,EAAA,EAAD,CAAMC,WAAS,EAACrP,QAAS,EAAzB,UACE,cAACoP,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,mFAGA,cAACH,EAAA,EAAD,CAAMC,WAAS,EAACC,MAAI,EAACC,GAAI,GAAIpO,eAAe,SAA5C,SACE,cAACqO,EAAA,EAAD,CAAQjM,QAAQ,YAAYkM,KAAK,QAAQC,UAAW,cAAC,KAAD,IAAgBvM,QAASuL,EAA7E,qCAIN,cAACiB,EAAA,EAAD,CAAU9P,KAAMiO,EAAgB8B,iBAAkB,IAAMC,QAASvB,EAAjE,SACE,cAACwB,GAAA,EAAD,CAAOD,QAASvB,EAAuByB,SAAS,UAAUlN,GAAI,CAAEhC,MAAO,QAAvE,sEAQR,IAAM+I,EAAYiE,EAAWnL,SAASkH,UAAY,cAACoG,GAAA,EAAD,CAAMC,MAAM,qBAAM3O,MAAM,YAAe,cAAC0O,GAAA,EAAD,CAAMC,MAAM,qBAAM3O,MAAM,YACjH,OACE,qCACE,eAAC2N,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,iBAGA,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACrP,QAAS,EAAzB,SACE,cAACoP,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,eAACW,GAAA,EAAD,CAAM3M,QAAQ,WAAd,UACE,eAAC4M,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CACEH,MAAM,MACNI,WAAS,EACTC,WAAS,EACT3L,MAAOkJ,EAAWnL,SAASmI,SAC3B0F,WAAY,CACVC,UAAU,KAGd,cAACvB,EAAA,EAAD,CAAWwB,OAAK,EAAC5N,GAAI,CAAC6N,UAAW,MAAOC,UAAW,SAAnD,SACG/G,OAGL,cAAC7F,EAAA,EAAD,CAASlB,GAAI,CAAC+N,QAAS,SACvB,eAACC,GAAA,EAAD,WACE,cAACrB,EAAA,EAAD,CAAQC,KAAK,QAAQtM,QAASyL,EAA9B,mCACA,cAACY,EAAA,EAAD,CAAQC,KAAK,QAAQtM,QAAS2L,EAA9B,yCACA,cAACU,EAAA,EAAD,CAAQC,KAAK,QAAQnO,MAAM,QAAQ6B,QAAS4L,EAA5C,uCAMV,cAACY,EAAA,EAAD,CAAU9P,KAAMiO,EAAgB8B,iBAAkB,IAAMC,QAASvB,EAAjE,SACE,cAACwB,GAAA,EAAD,CAAOD,QAASvB,EAAuByB,SAAS,UAAUlN,GAAI,CAAEhC,MAAO,QAAvE,mEAIF,eAACiQ,GAAA,EAAD,CACET,WAAW,EACXnB,SAAS,KACTrP,KAAMmO,EACN,kBAAgB,0BAJlB,UAME,cAAC+C,GAAA,EAAD,CAAatJ,GAAG,0BAAhB,SACG0G,EAAWD,QAEd,cAAC8C,GAAA,EAAD,UACE,cAACZ,GAAA,EAAD,CACEH,MAAM,MACNI,WAAS,EACTC,WAAS,EACTW,QAAS,GACTtM,MAAOwJ,EAAWhE,KAClBoG,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,SAEjB5B,GAAI,CAAE6N,UAAW,WAGrB,cAACQ,GAAA,EAAD,UACE,cAAC1B,EAAA,EAAD,CAAQrM,QAAS6L,EAAamC,WAAS,EAAvC,yB,UCrOJC,GACK,EADLA,GAEO,EAGAC,GAAS,WACpB,MAA4B5P,WAAe2P,IAA3C,mBAAOlH,EAAP,KAAeoH,EAAf,KACA,EAA4B7P,WAAe,IAA3C,mBAAO8P,EAAP,KAAeC,EAAf,KACA,EAAkC/P,WAAe,IAAjD,mBAAOgQ,EAAP,KAAkBC,EAAlB,KAEM7D,EAAa/L,IACb8L,EAAkBhM,IAClB+P,EAAWC,cAEjB,IAAK/D,EAAWnL,SACd,OAAQ,cAAC,IAAD,CAAUuB,GAAG,IAAI4N,SAAO,IAGlC,IAQMC,EAAW,iDAAG,wFAClBC,EAAYN,GADM,2CAAH,qDAIXM,EAAW,iDAAG,WAAOC,GAAP,8EACbpE,EAAgBxL,SADH,oDAIbyL,EAAWnL,SAJE,oDAQsB,IAApCsP,EAAWC,QAAQ,aARL,uBAShBC,MAAM,8DATU,0BAalBP,EAAS,WAAarG,KAAUe,OAAO2F,IAbrB,4CAAH,sDAgBXG,EACJ,cAAC,KAAD,CACEC,YAAa,CAAEC,WAAY,eAC3BC,SAAU,SAACC,GACLA,IACFC,QAAQC,IAAIF,GACZf,EAAUe,EAAOG,WACjBpB,EAAUF,IAEsC,IAA5CmB,EAAOG,UAAUT,QAAQ,gBAC3BF,EAAYQ,EAAOG,eAOvBC,EACJ,cAACzC,GAAA,EAAD,CAAM3M,QAAQ,WAAd,SACE,eAAC4M,GAAA,EAAD,WACE,cAAC7M,EAAA,EAAD,CAAYC,QAAQ,KAApB,oDAGA,cAACD,EAAA,EAAD,CAAYT,GAAI,CAAC+P,SAAU,aAAclC,UAAW,QAApD,SACIa,SAMV,OACE,eAACtC,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,wCAGA,cAACF,EAAA,EAAD,CAAWC,SAAS,KAApB,SACIhF,IAAWkH,GAAmBuB,EAAWR,IAE7C,eAAClD,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAC6N,UAAW,QAAzC,UACE,cAACN,GAAA,EAAD,CAAW3I,GAAG,aAAawI,MAAM,iBAAiBI,WAAS,EAACC,WAAS,EAACW,QAAS,EAAGxB,KAAK,QAAQ9K,MAAO8M,EAAWoB,SAnElG,SAACC,GACpB,GACO,eADCA,EAAEC,OAAOtL,GAEbiK,GAAa,kBAAMoB,EAAEC,OAAOpO,YAiE5B,cAAC6K,EAAA,EAAD,CAAQjM,QAAQ,YAAYV,GAAI,CAAC6N,UAAW,OAAQvN,QAAS2O,EAA7D,uC,wCCpFKkB,GAAU,WACrB,IAAMnF,EAAa/L,IACnB,EAAsCL,WAAe,CAACwR,QAAQ,GAAIC,SAAS,GAAI/G,OAAO,KAAtF,mBAAOgH,EAAP,KAAoBC,EAApB,KAEA3R,aAAgB,WAId,OAHK0R,EAAYF,SACf5E,IAEK,gBAKT,IAAMA,EAAK,iDAAG,sGACRR,EAAWnL,SADH,6BAEV0Q,EAFU,KAGCpK,KAHD,SAGuBuB,GAAe3D,KAAKiH,EAAWnL,SAASuE,cAH/D,wJAGgB,EAA+DuD,WAH/E,mCAGMvB,UAHN,eAG2F,KAAM,GAHjG,KAIED,KAJF,UAIwBuB,GAAe3D,KAAK2D,GAAeG,WAAWC,UAJtE,6JAIiB,EAAiEH,WAJlF,sCAIOvB,UAJP,gBAI8F,KAAM,GAJpG,MAKAD,KALA,UAKsBuB,GAAe3D,KAAK2D,GAAeG,WAAWE,QALpE,mKAKe,EAA+DJ,WAL9E,gCAKKvB,UALL,iBAK0F,KAAM,GALhG,OAGRgK,QAHQ,KAIRC,SAJQ,MAKR/G,OALQ,2EAAH,qDAUX,OAAK0B,EAAWnL,SAKd,mCACE,eAACuM,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,6BAGA,eAACkE,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAA9B,SACE,cAACjQ,EAAA,EAAD,0BAEF,cAACkQ,GAAA,EAAD,UACE,cAACpD,GAAA,EAAD,CACEH,MAAM,YACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOkJ,EAAWnL,SAASoI,QAC3ByF,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,gBAKvB,eAAC4O,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAA9B,SACE,cAACjQ,EAAA,EAAD,kCAEF,cAACkQ,GAAA,EAAD,UACE,cAACpD,GAAA,EAAD,CACEH,MAAM,oBACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOwO,EAAYF,QACnB1C,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,gBAKvB,eAAC4O,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAA9B,SACE,cAACjQ,EAAA,EAAD,mCAEF,cAACkQ,GAAA,EAAD,UACE,cAACpD,GAAA,EAAD,CACEH,MAAM,qBACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOwO,EAAYD,SACnB3C,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,gBAKvB,eAAC4O,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAA9B,SACE,cAACjQ,EAAA,EAAD,iCAEF,cAACkQ,GAAA,EAAD,UACE,cAACpD,GAAA,EAAD,CACEH,MAAM,mBACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOwO,EAAYhH,OACnBoE,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,qBA5EnB,cAAC,IAAD,CAAUR,GAAG,IAAI4N,SAAO,KCxBvB4B,GAAS,WACpB,IAAM5F,EAAa/L,IACnB,EAA4BL,WAAe,IAA3C,mBAAOiS,EAAP,KAAeC,EAAf,KAEAlS,aAAgB,WAId,OAHKiS,EAAOhK,QACV2E,IAEK,gBAKT,IAAMA,EAAK,iDAAG,8GACSpD,GAAO2I,MADhB,OACNF,EADM,OAEZC,EAAUD,GAFE,2CAAH,qDAKX,IAAK7F,EAAWnL,SACd,OAAQ,cAAC,IAAD,CAAUuB,GAAG,IAAI4N,SAAO,IAIlC,IADA,IAAMgC,EAAQ,GACLC,EAAM,EAAGA,EAAMJ,EAAOhK,OAAQoK,IACrCD,EAAME,KACJ,eAACV,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAA9B,SACE,eAACjQ,EAAA,EAAD,iBAAgBwQ,OAElB,cAACN,GAAA,EAAD,UACE,cAACpD,GAAA,EAAD,CACEH,MAAM,KACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOqE,KAAKC,UAAUyK,EAAOI,GAAK1N,GAAGoF,QAAS,KAAM,GACpD+E,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,eAbP,MAAQqP,IAqB5B,OACE,mCACE,eAAC7E,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,4BAGE0E,Q,wCCjDJzC,GACE,EADFA,GAEG,EAFHA,GAGa,GAHbA,GAIc,GAJdA,GAKa,GALbA,GAMc,GAOP4C,GAAa,WACxB,IAAQC,EAAUC,cAAVD,MACR,EAA4BxS,WAAe2P,IAA3C,mBAAOlH,EAAP,KAAeoH,EAAf,KACA,EAAgC7P,WAAe,IAA/C,mBAAO0S,EAAP,KAAiBC,EAAjB,KACA,EAAkC3S,WAAe,CAC/C4S,gBAAiB,GACjBC,SAAU,KAFZ,mBAAOC,EAAP,KAAkBC,EAAlB,KAIA,EAAkC/S,WAAe,CAC/C4S,gBAAiB,GACjBX,OAAQ,KAFV,mBAAOe,EAAP,KAAkBC,EAAlB,KAKM7G,EAAa/L,IACb8L,EAAkBhM,IAClB+L,EAAoBjM,IACpBiQ,EAAWC,cAEjBnQ,aAAgB,WAKd,OAJIyI,IAAWkH,KACbzD,EAAkBxL,eAAc,GAChCwS,KAEK,gBAKT,IAAMA,EAAU,iDAAG,mGACjBrD,EAAUF,KACN6C,EAFa,6BAIfrG,EAJe,SAImBvH,GAASO,OAJ5B,+BAICvE,YAJD,yBAOQyE,GAAQF,OAPhB,WAOTlE,EAPS,SASbmL,EAAWlL,YAAYD,GAIkB,KADrCsP,EAAa1G,KAAUC,OAAO0I,IACrBhC,QAAQ,gBAbR,wBAcb2C,EAAO5C,GAdM,8BAiB6B,IAAxCA,EAAWC,QAAQ,iBAjBR,wBAkBb4C,EAAS7C,GAlBI,2BAuBjBL,EAAS,KAvBQ,4CAAH,qDAkCVkD,EAAQ,iDAAG,WAAO7C,GAAP,mFACT8C,EAASC,YAAqB/C,IAC9BjL,EAAM,IAAIiO,IAAIF,EAAOG,MAAMC,cAC7BC,aAAaC,OAAO,gBAAiB,QACzCrO,EAAIoO,aAAaC,OAAO,YAAa,OACrCrO,EAAIoO,aAAaC,OAAO,QAAS,WACjCrO,EAAIoO,aAAaC,OAAO,QAAS,OAEjCC,OAAOC,SAASC,KAAOxO,EAAIyF,WARZ,2CAAH,sDAWRgJ,EAAkB,iDAAG,WAAOzO,GAAP,0FACpB6G,EAAgBxL,SADI,sBAEjB,IAAIwK,MAAM,mBAFO,cAMnBkI,EAASC,YAAqBhO,GANX,SAOFgD,iBAAM+K,EAAOG,MAAMC,aAPjB,cAOnBO,EAPmB,gBAQNA,EAAStL,OARH,cAQnBuL,EARmB,OASnBC,EAAMzO,GAAe0O,UAAUF,GACrClD,QAAQC,IAAIkD,GAVa,UAabzO,GAAe2O,eAAeF,EAAK/H,EAAgBxL,SAASmE,YAb/C,yCAcjB,IAAIqG,MAAM,sCAdO,eAgBzB4F,QAAQC,IAAI,qBAhBa,kBAkBlBkD,GAlBkB,4CAAH,sDAqBlBG,EAAW,iDAAG,WAAO/O,GAAP,wFACb6G,EAAgBxL,SADH,sBAEV,IAAIwK,MAAM,mBAFA,uBAKK7C,iBAAMhD,GALX,cAKZ0O,EALY,gBAMIA,EAASpL,OANb,cAMZ0L,EANY,OAOZJ,EAAMzO,GAAe0O,UAAUG,EAAQC,OAC7CxD,QAAQC,IAAIkD,GARM,UAWNzO,GAAe2O,eAAeF,EAAK/H,EAAgBxL,SAASmE,YAXtD,yCAYV,IAAIqG,MAAM,sCAZA,eAclB4F,QAAQC,IAAI,qBAdM,kBAgBXkD,GAhBW,4CAAH,sDAmBXf,EAAM,iDAAG,WAAO5C,GAAP,oFAC8B,IAAvCA,EAAWC,QAAQ,gBADV,uBAEXC,MAAM,iEAFK,0CAOXvE,EAAkBxL,eAAc,GAPrB,SAUmBqT,EAAmBxD,GAVtC,QAULqC,EAVK,QAYS7I,QAAQyK,QAA6C,WAAnC5B,EAAgB7I,QAAQyK,OAC5DC,EAAQ7B,GAER8B,EAAS9B,GAfA,kDAkBXnC,MAAM,KAAEkE,SAAF,MACNzI,EAAkBxL,eAAc,GAnBrB,kEAAH,sDAuBNgU,EAAQ,iDAAG,WAAO9B,GAAP,0GAIQpJ,GAAO2I,MAJf,WAIPF,EAJO,QAKDhK,OALC,sBAMLkD,MAAM,iBAND,OAUb8H,EAAa,CACXL,gBAAiBA,EACjBX,OAAQA,IAEVpC,EAAUF,IAdG,kDAgBbc,MAAM,KAAEkE,SAAF,MAhBO,QAoBf3H,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KAtBY,0DAAH,sDAyBR+T,EAAO,iDAAG,WAAO7B,GAAP,mGAINgC,EAAchC,EAAgB7I,QAAQ8K,OAAOC,SAASC,wBAAwBC,kBAAkB,GAAGC,SAAS,GAAGC,UAJzG,SAKWb,EAAYO,GALvB,OAKN/B,EALM,OAQZE,EAAa,CACXH,gBAAiBA,EACjBC,SAAUA,IAEZhD,EAAUF,IAZE,gDAcZc,MAAM,KAAEkE,SAAF,MAdM,QAkBd3H,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KApBW,yDAAH,sDAuBPyU,EAAK,iDAAG,+GACPhJ,EAAgBxL,SADT,oDAIPyL,EAAWnL,SAJJ,iEAWViL,EAAkBxL,eAAc,GAXtB,SAcY2E,GAAQqG,QAAQS,EAAgBxL,SAASmE,WAAYsH,EAAWnL,SAASwD,KAdrF,cAcJkH,EAdI,OAeJyJ,EAAMC,KAAKC,MAAMxK,KAAKsK,MAAQ,MAE9BG,EAAoB,CACxB3L,OAAQ,CACN4L,IAAK,SACLC,IAAK,MACLjK,IAAKY,EAAWnL,SAASuK,KAE3BzB,QAAS,CACP2L,IAAK,yBACLC,IAAK7C,EAAUD,SAAS9I,QAAQ1D,MAAMuP,iBACtCC,SAAU/C,EAAUD,SAAS9I,QAAQzK,QAAQuW,SAC7CC,IAAKV,EACLW,IAAKX,EAAM,IACXY,QAASzO,KAAKI,MAAMJ,KAAKC,UAAUmE,EAAQ/D,YAAYgE,mBAAmB,GAAGG,eAC7EkK,IAAKxQ,GAAeyQ,YAAYvK,EAAQ/D,YAAYgE,mBAAmB,GAAGG,cAC1EoK,IAAKC,OACL3R,IAAK2H,EAAWnL,SAASwD,IACzB4R,IAAK5Q,GAAe6Q,aAAa5D,GACjC6D,aAAc,CACZC,SAAU,CACR,yBAA0B1D,EAAUF,gBAAgB7I,QAAQ0M,mBAO9C1M,QAAQ4L,IAAInF,QAAQ,qBAAuB,IAC/D+E,EAAkBxL,QAAQ4L,IAAM,6GAGlC5E,QAAQC,IAAIuE,GA/CF,UAkDoBzM,GAAe3D,KAAKiH,EAAWnL,SAASuE,cAlD5D,eAkDJkR,EAlDI,iBAmDyBjR,GAAekR,QAAQpB,EAAkB3L,OAAQ2L,EAAkBxL,QAAnE,OAA4E2M,QAA5E,IAA4EA,OAA5E,EAA4EA,EAAiB3N,YAnDtH,eAmDJ6N,EAnDI,iBAsDatO,iBAAMwK,EAAUD,SAAS9I,QAAQ1D,MAAMuP,iBAAkB,CAC9E1N,OAAQ,OACR2O,KAAM,OACNC,MAAO,WACP7C,KAAM2C,IA1DE,WA6Dc,OAPlB5C,EAtDI,QA6DGvL,OA7DH,6BA8DF0C,MA9DE,UA8DU6I,EAAStL,OA9DnB,kEAiEYsL,EAASpL,OAjErB,eAiEJ0L,EAjEI,OAkEJJ,EAAMzO,GAAe0O,UAAUG,EAAQ3P,IAC7CoM,QAAQC,IAAIkD,GAnEF,UAsEEzO,GAAe2O,eAAeF,EAAK/H,EAAgBxL,SAASmE,YAtE9D,yCAuEF,IAAIqG,MAAM,sCAvER,eAyEV4F,QAAQC,IAAI,qBAzEF,UA4EJxH,GAAO0D,KAAKgH,GA5ER,QA8EVrE,EAAUF,IA9EA,kDAgFVc,MAAM,KAAEkE,SAAF,MAhFI,QAmFZ3H,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KArFS,0DAAH,qDAwFLqW,EAAM,iDAAG,+GACR5K,EAAgBxL,SADR,oDAIRyL,EAAWnL,SAJH,iEAWXiL,EAAkBxL,eAAc,GAG1B0U,EAAMC,KAAKC,MAAMxK,KAAKsK,MAAQ,KAE9B4B,EAAU,CACdpN,OAAQ,CACN4L,IAAK,SACLC,IAAK,MACLjK,IAAKY,EAAWnL,SAASuK,KAE3BzB,QAAS,CACP2L,IAAK,sCACLC,IAAK3C,EAAUJ,gBAAgB7I,QAAQkN,UACvChB,IAAK7J,EAAWnL,SAASwD,IACzBqR,IAAKV,EACLW,IAAKX,EAAM,IACX8B,MAAOlE,EAAUJ,gBAAgB7I,QAAQmN,MACzCC,UAAW,CACTC,wBAAyB,CACvBpR,GAAIoQ,OACJiB,cAAejB,OACfkB,eAAgB,CACd,CACEtR,GAAI,2BACJuR,OAAQ,SACRC,KAAM,IACN,YAAe,CACbxR,GAAI,2BACJuR,OAAQ,SACRC,KAAM,mCASpBzG,QAAQC,IAAIgG,GAlDD,UAqDmBlO,GAAe3D,KAAKiH,EAAWnL,SAASuE,cArD3D,eAqDLkR,EArDK,iBAsDcjR,GAAekR,QAAQK,EAAQpN,OAAQoN,EAAQjN,QAA/C,OAAwD2M,QAAxD,IAAwDA,OAAxD,EAAwDA,EAAiB3N,YAtDvF,eAsDL0O,EAtDK,OAwDLC,EAAU,CACd9N,OAAQ,CACN4L,IAAK,SACLC,IAAK,MACLjK,IAAKY,EAAWnL,SAASuK,KAE3BzB,QAAS,CACP2L,IAAKtJ,EAAWnL,SAASwD,IACzBkR,IAAK3C,EAAUJ,gBAAgB7I,QAAQkN,UACvCnB,IAAKV,EACLuC,IAAKvC,EACLW,IAAKX,EAAM,IACX8B,MAAOlE,EAAUJ,gBAAgB7I,QAAQmN,MACzCU,GAAI,CACF,WAAY,CACV,0CAEFC,KAAM,CACJ,0BAEFC,qBAAsB,CACpB9E,EAAUf,OAAO,GAAGtN,GAAGqF,QAM/B+G,QAAQC,IAAI0G,GAnFD,UAuFcjS,GAAekR,QAAQe,EAAQ9N,OAAQ8N,EAAQ3N,QAA/C,OAAwD2M,QAAxD,IAAwDA,OAAxD,EAAwDA,EAAiB3N,YAvFvF,eAuFLgP,EAvFK,QAyFLC,EAAS,IAAIC,iBACZtE,OAAO,WAAY8D,GAC1BO,EAAOrE,OAAO,WAAYoE,GAC1BC,EAAOrE,OAAO,QAASX,EAAUJ,gBAAgB7I,QAAQmO,OA5F9C,UA8FY5P,iBAAM0K,EAAUJ,gBAAgB7I,QAAQoO,aAAc,CAC3EjQ,OAAQ,OACR2O,KAAM,OACNC,MAAO,WACP7C,KAAM+D,IAlGG,WAqGa,OAPlBhE,EA9FK,QAqGEvL,OArGF,6BAsGH0C,MAtGG,UAsGS6I,EAAStL,OAtGlB,iDAyGXmH,EAAUF,IAzGC,kDA2GXc,MAAM,KAAEkE,SAAF,MA3GK,QA8Gb3H,YAAW,WACTd,EAAkBxL,eAAc,KAC/B,KAhHU,0DAAH,qDAmHZ,OAAI+H,IAAWkH,GAEX,eAACnC,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAEgC,SAAU,OAAzC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAAEsM,aAAc,QAA7C,oDAGA,cAAC7L,EAAA,EAAD,wGAOF4G,IAAWkH,GAEX,eAACnC,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAEgC,SAAU,OAAzC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAAEsM,aAAc,QAA7C,wCAGA,eAACe,GAAA,EAAD,CAAMrN,GAAI,CAAEgX,QAAStF,EAAUD,SAAS9I,QAAQzK,QAAQ+Y,KAAKC,gBAAiB7K,SAAU,QAAS0B,QAAS,QAA1G,UACE,cAACoJ,GAAA,EAAD,CACEC,OAAQ,cAACC,GAAA,EAAD,CAAQC,IAAK5F,EAAUD,SAAS9I,QAAQzK,QAAQ+Y,KAAKM,KAAKC,MAClEnM,MAAOqG,EAAUD,SAAS9I,QAAQzK,QAAQ+Y,KAAK5L,MAC/CrL,GAAI,CAAEvB,MAAOiT,EAAUD,SAAS9I,QAAQzK,QAAQ+Y,KAAKQ,aAEvD,cAACnK,GAAA,EAAD,UACE,eAAC7M,EAAA,EAAD,CAAYT,GAAI,CAAEvB,MAAOiT,EAAUD,SAAS9I,QAAQzK,QAAQ+Y,KAAKQ,WAAjE,UACE,uBADF,oBAMJ,cAAChX,EAAA,EAAD,CAAYT,GAAI,CAAE6N,UAAW,QAA7B,SAAwC6D,EAAUD,SAAS9I,QAAQzK,QAAQwZ,QAAQrM,QACnF,cAACkC,GAAA,EAAD,CAAW3I,GAAG,YAAYwI,MAAM,MAAMI,WAAS,EAACxN,GAAI,CAAE6N,UAAW,QAAU8J,WAAY,CAAEC,UAAW,UAAWC,QAAS,UACtH/V,MAAOwP,EAAUtB,SA/WJ,SAACC,GAEb,cADCA,EAAEC,OAAOtL,IAEb2M,GAAY,kBAAMtB,EAAEC,OAAOpO,YA8W3B,eAACyK,EAAA,EAAD,CAAMC,WAAS,EAACrP,QAAS,EAAG6C,GAAI,CAAE6N,UAAW,QAA7C,UACE,cAACtB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQjM,QAAQ,WAAW8M,WAAS,EAAClN,QAAS,kBAAMwO,EAAS,MAA7D,8CAEF,cAACvC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQjM,QAAQ,YAAY8M,WAAS,EAAClN,QAASyT,EAA/C,kCAON1M,IAAWkH,GAEX,eAACnC,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAEgC,SAAU,OAAzC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAAEsM,aAAc,QAA7C,wCAGA,cAACe,GAAA,EAAD,CAAM3M,QAAQ,WAAd,SACE,eAAC4M,GAAA,EAAD,WACE,cAAC7M,EAAA,EAAD,CAAYT,GAAI,CAAEsM,aAAc,QAAhC,sCAGA,cAACiB,GAAA,EAAD,CACEH,MAAM,oBACNI,WAAS,EACTC,WAAS,EACTW,QAAS,EACTtM,MAAOqE,KAAKC,UAAUwL,EAAUJ,gBAAgB7I,QAAQ8K,OAAOC,SAASC,wBAAwBC,kBAAmB,KAAM,GACzHlG,WAAY,CACVC,UAAU,EACV3N,GAAI,CAAC4B,SAAU,gBAKvB,cAACnB,EAAA,EAAD,CAAYT,GAAI,CAAE6N,UAAW,UAG7B,eAACtB,EAAA,EAAD,CAAMC,WAAS,EAACrP,QAAS,EAAG6C,GAAI,CAAE6N,UAAW,QAA7C,UACE,cAACtB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQjM,QAAQ,WAAW8M,WAAS,EAAClN,QAAS,kBAAMwO,EAAS,MAA7D,8CAEF,cAACvC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQjM,QAAQ,YAAY8M,WAAS,EAAClN,QAASqV,EAA/C,kCAONtO,IAAWkH,GAEX,eAACnC,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAEgC,SAAU,OAAzC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAAEsM,aAAc,QAA7C,wCAGA,cAAC7L,EAAA,EAAD,sFAQJ,cAAC2L,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAAEgC,SAAU,OAAzC,SACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAAEsM,aAAc,QAA7C,8B,UC5fOwL,GAAe,WAC1B,MAAwBlZ,YAAe,GAAvC,mBAAO5B,EAAP,KAAaoC,EAAb,KACA,EAAwCR,WAAe,IAAvD,mBAAO6E,EAAP,KAAqBsU,EAArB,KACA,EAAoCnZ,WAAe,IAAnD,mBAAO8E,EAAP,KAAmBsU,EAAnB,KAEMC,EAAe,SAAChI,GACpB,OAAQA,EAAEC,OAAOtL,IACf,IAAK,gBACHmT,GAAgB,kBAAM9H,EAAEC,OAAOpO,SAC/B,MACF,IAAK,cACHkW,GAAc,kBAAM/H,EAAEC,OAAOpO,WAS7BoW,EAAc,SAACxM,EAAsCC,GAC1C,cAAXA,GAGJvM,GAAQ,IAGJ+Y,EAAY,iDAAG,qGAEb5Y,EAAW,IAAIiE,IACZC,aAAeA,EACxBlE,EAASmE,WAAaA,EAJH,SAKbnE,EAASuM,OALI,OAVnB1M,GAAQ,GAUW,2CAAH,qDAUZgZ,EAAa,iDAAG,8GACd5U,GAASQ,QADK,OAEdzE,EAAW,IAAIiE,GACrBuU,EAAgBxY,EAASkE,cACzBuU,EAAczY,EAASmE,YAJH,2CAAH,qDAkBnB,OAXA9E,aAAgB,WAMd,OAJA4E,GAASO,OAAOsU,MAAK,SAAC9Y,GACpBwY,EAAgBxY,EAASkE,cACzBuU,EAAczY,EAASmE,eAElB,eAGP,IAGA,qCACE,eAAC0I,EAAA,EAAD,CAAWC,SAAS,KAAKrM,GAAI,CAACgC,SAAU,OAAxC,UACE,cAACvB,EAAA,EAAD,CAAYC,QAAQ,KAAKV,GAAI,CAACsM,aAAc,QAA5C,sBAGA,eAACC,EAAA,EAAD,CAAMC,WAAS,EAACrP,QAAS,EAAzB,UACE,cAACoP,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACa,GAAA,EAAD,CAAW3I,GAAG,gBAAgB4I,WAAS,EAACJ,MAAM,gBAAgB1M,QAAQ,WAAWoB,MAAO2B,EAAcuM,SAAUiI,MAElH,cAAC1L,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACa,GAAA,EAAD,CAAW3I,GAAG,cAAc4I,WAAS,EAACJ,MAAM,cAAc1M,QAAQ,WAAWoB,MAAO4B,EAAYsM,SAAUiI,MAE5G,cAAC1L,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQa,WAAS,EAAC9M,QAAQ,YAAYmM,UAAW,cAAC,KAAD,IAAcvM,QAAS6X,EAAxE,4BAEF,cAAC5L,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACC,EAAA,EAAD,CAAQa,WAAS,EAAC9M,QAAQ,YAAYjC,MAAM,QAAQ6B,QAAS8X,EAA7D,8CAIN,cAACtL,EAAA,EAAD,CAAU9P,KAAMA,EAAM+P,iBAAkB,IAAMC,QAASkL,EAAvD,SACE,cAACjL,GAAA,EAAD,CAAOD,QAASkL,EAAahL,SAAS,UAAUlN,GAAI,CAAEhC,MAAO,QAA7D,gFCzDOsa,GAhBH,WACV,OAAO,cAAC,IAAD,UACL,cAAC,IAAD,UACE,eAAC,IAAD,CAAOC,QAAS,cAAC,EAAD,IAAhB,UACE,cAAC,IAAD,CAAOC,OAAK,EAACD,QAAS,cAAC,GAAD,MACtB,cAAC,IAAD,CAAOnC,KAAK,KAAKmC,QAAS,cAAC,GAAD,MAC1B,cAAC,IAAD,CAAOnC,KAAK,MAAMmC,QAAS,cAAC,GAAD,MAC3B,cAAC,IAAD,CAAOnC,KAAK,KAAKmC,QAAS,cAAC,GAAD,MAC1B,cAAC,IAAD,CAAOnC,KAAK,gBAAgBmC,QAAS,cAAC,GAAD,MAErC,cAAC,IAAD,CAAOnC,KAAK,WAAWmC,QAAS,cAAC,GAAD,cCRlCE,GAAcC,QACW,cAA7BlG,OAAOC,SAASkG,UAEe,UAA7BnG,OAAOC,SAASkG,UAEhBnG,OAAOC,SAASkG,SAASC,MAAM,2DA0CnC,SAASC,GAAgBC,EAAeC,GACtCC,UAAUC,cACPC,SAASJ,GACTT,MAAK,SAACc,GACLA,EAAaC,cAAgB,WAEvBD,EAAaE,SAAWN,GAAUA,EAAOO,UAC3CP,EAAOO,SAASH,GAElB,IAAMI,EAAmBJ,EAAaK,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBzC,MACfkC,UAAUC,cAAcS,YAI1B/J,QAAQC,IACN,+GAKEmJ,GAAUA,EAAOO,UACnBP,EAAOO,SAASH,KAMlBxJ,QAAQC,IAAI,sCAGRmJ,GAAUA,EAAOY,WACnBZ,EAAOY,UAAUR,IAGe,cAA3BI,EAAiBzC,OAC1BtE,OAAOC,SAASmH,eAKvBC,OAAM,SAACtS,GACNoI,QAAQpI,MAAM,4CAA6CA,MCvGjE,IAYeuS,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqB3B,MAAK,YAAkD,IAA/C4B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,UCNDO,GAAwE,SAAC,GAAsB,IAApBnB,EAAmB,EAAnBA,aACtF,EAAwBoB,qBAAWpB,EAAaE,SAAhD,mBAAOmB,EAAP,KAAaC,EAAb,KAOA,OACE,eAACxM,GAAA,EAAD,CAAQjR,KAAMwd,EAAd,UACE,cAACtM,GAAA,EAAD,CAAa7M,MAAO,CAACyM,UAAW,UAAhC,8DAGA,cAACK,GAAA,EAAD,UACE,cAACuM,GAAA,EAAD,mIAIF,cAACrM,GAAA,EAAD,CAAerO,GAAI,CAAC1B,eAAgB,UAApC,SACE,cAACqO,EAAA,EAAD,CAAQrM,QAjBO,WAAO,IAAD,EACzB,UAAA6Y,EAAaE,eAAb,SAAsBsB,YAAY,CAAElE,KAAM,iBAC1CgE,GAAQ,IAeJ,wDCdRG,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF5V,SAAS6V,eAAe,SHanB,SAAkBhC,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAI7G,IAAI6I,GAAwBxI,OAAOC,SAASC,MACpDuI,SAAWzI,OAAOC,SAASwI,OAIvC,OAGFzI,OAAO0I,iBAAiB,QAAQ,WAC9B,IAAMpC,EAAK,UAAMkC,GAAN,sBAEPvC,KAsEV,SAAiCK,EAAeC,GAE9C7R,MAAM4R,EAAO,CACXqC,QAAS,CAAE,iBAAkB,YAE5B9C,MAAK,SAACzF,GAEL,IAAMwI,EAAcxI,EAASuI,QAAQxX,IAAI,gBAEnB,MAApBiP,EAASvL,QACO,MAAf+T,IAA8D,IAAvCA,EAAYhM,QAAQ,cAG5C4J,UAAUC,cAAcoC,MAAMhD,MAAK,SAACc,GAClCA,EAAamC,aAAajD,MAAK,WAC7B7F,OAAOC,SAASmH,eAKpBf,GAAgBC,EAAOC,MAG1Bc,OAAM,WACLlK,QAAQC,IAAI,oEA5FV2L,CAAwBzC,EAAOC,GAI/BC,UAAUC,cAAcoC,MAAMhD,MAAK,WACjC1I,QAAQC,IACN,+GAMJiJ,GAAgBC,EAAOC,OGlC/ByC,CAAmC,CACjClC,SAAU,SAAAH,GACJA,EAAaE,SACfuB,IAASC,OAAO,cAAC,GAAD,CAAgB1B,aAAcA,IAAkBjU,SAASuW,cAAc,yBAQ7F3B,O","file":"static/js/main.375316da.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Outlet } from 'react-router-dom'\nimport { styled, useTheme } from '@mui/material/styles';\nimport { Box, Drawer, CssBaseline, Toolbar, Typography, Divider, IconButton, \n  List, ListItem, ListItemIcon, ListItemText, Backdrop, CircularProgress} from '@mui/material';\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from '@mui/material/AppBar';\nimport { \n  Menu as IconMenu,\n  ChevronLeft as IconChevronLeft,\n  ChevronRight as IconChevronRight,\n  Home as IconHome,\n  QrCode as IconQrCode,\n  Key as IconKey,\n  CardMembership as IconCardMembership,\n  Settings as IconSettings,\n} from '@mui/icons-material';\nimport { NavLink } from 'react-router-dom';\n\nimport { Settings } from '../helpers/settings';\nimport { DidModel } from '../helpers/didTools';\n\nconst buildNo = '20220613.001';\nconst drawerWidth = 200;\n\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })<{\n  open?: boolean;\n}>(({ theme, open }) => ({\n  flexGrow: 1,\n  padding: theme.spacing(3),\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  marginLeft: `-${drawerWidth}px`,\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  }),\n}));\n\ninterface AppBarProps extends MuiAppBarProps {\n  open?: boolean;\n}\n\nconst AppBar = styled(MuiAppBar, {\n  shouldForwardProp: (prop) => prop !== 'open',\n})<AppBarProps>(({ theme, open }) => ({\n  transition: theme.transitions.create(['margin', 'width'], {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  ...(open && {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: `${drawerWidth}px`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  }),\n}));\n\nconst DrawerHeader = styled('div')(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  padding: theme.spacing(0, 1),\n  // necessary for content to be below app bar\n  ...theme.mixins.toolbar,\n  justifyContent: 'flex-end',\n}));\n\nconst menulink = {\n  textDecorationLine: 'none',\n  color: '#444',\n  fontWeight: 'bold'\n}\n\n// ロード中表示のコンテキスト\nexport type NowLoadingContextType = {\n  isNowLoading: boolean;\n  setNowLoading: (isNowLoading: boolean) => void;\n}\nconst NowLoadingContext = React.createContext<NowLoadingContextType>({} as NowLoadingContextType);\nexport const useNowLoadingContext = ():NowLoadingContextType => {\n  return React.useContext<NowLoadingContextType>(NowLoadingContext);\n}\n\n// 設定のコンテキスト\nexport type SettingsContextType = {\n  settings: Settings | null;\n  setSettings: (settings: Settings) => void;\n}\nconst SettingsContext = React.createContext<SettingsContextType>({} as SettingsContextType);\nexport const useSettingsContext = ():SettingsContextType => {\n  return React.useContext<SettingsContextType>(SettingsContext);\n}\n\n// DID情報のコンテキスト\nexport type DidContextType = {\n  didModel: DidModel | null;\n  setDidModel: (didModel: DidModel | null) => void;\n}\nconst DidContext = React.createContext<DidContextType>({} as DidContextType);\nexport const useDidContext = ():DidContextType => {\n  return React.useContext<DidContextType>(DidContext);\n}\n\nexport const SideMenuLayout = () => {\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n  const [isNowLoading, setNowLoading] = React.useState(false);\n  const [settings, setSettings] = React.useState<Settings | null>(null);\n  const [didModel, setDidModel] = React.useState<DidModel | null>(null);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const nowLoadingValue: NowLoadingContextType = { isNowLoading, setNowLoading };\n  const settingsValue: SettingsContextType = { settings, setSettings };\n  const didValue: DidContextType = { didModel, setDidModel };\n\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" open={open}>\n        <Toolbar sx={{minHeight: '40px'}}>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            sx={{ mr: 2, ...(open && { display: 'none' }) }}\n          >\n            <IconMenu />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap component=\"div\">\n            ION PWA Sample\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        sx={{\n          width: drawerWidth,\n          flexShrink: 0,\n          '& .MuiDrawer-paper': {\n            width: drawerWidth,\n            boxSizing: 'border-box',\n          },\n        }}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={open}\n      >\n        <DrawerHeader>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <IconChevronLeft /> : <IconChevronRight />}\n          </IconButton>\n        </DrawerHeader>\n        <Divider />\n\n        <List>\n          <NavLink to='/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconHome /></ListItemIcon>\n              <ListItemText primary='トップ' />\n            </ListItem>\n          </NavLink>\n          <NavLink to='/qr/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconQrCode /></ListItemIcon>\n              <ListItemText primary='QR読み込み' />\n            </ListItem>\n          </NavLink>\n          <NavLink to='/did/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconKey /></ListItemIcon>\n              <ListItemText primary='DID詳細' />\n            </ListItem>\n          </NavLink>\n          <NavLink to='/vc/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconCardMembership /></ListItemIcon>\n              <ListItemText primary='VC一覧' />\n            </ListItem>\n          </NavLink>\n        </List>\n        <Divider />\n        <List>\n          <NavLink to='/settings/' style={menulink} onClick={handleDrawerClose}>\n            <ListItem button>\n              <ListItemIcon sx={{minWidth: '40px'}}><IconSettings /></ListItemIcon>\n              <ListItemText primary='設定' />\n            </ListItem>\n          </NavLink>\n        </List>\n        <Divider />\n        <List>\n          <ListItem sx={{fontSize: '14px', color: 'gray'}}>\n            build: {buildNo}\n          </ListItem>\n        </List>\n\n      </Drawer>\n      <NowLoadingContext.Provider value={nowLoadingValue}>\n        <SettingsContext.Provider value={settingsValue}>\n          <DidContext.Provider value={didValue}>\n            <Main onClick={handleDrawerClose} sx={{height: '100vh', width: '100%', paddingX: '8px'}}>\n              <DrawerHeader sx={{minHeight: '40px'}} />\n              <Outlet />\n            </Main>\n            <Backdrop\n              sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n              open={nowLoadingValue.isNowLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          </DidContext.Provider>\n        </SettingsContext.Provider>\n      </NowLoadingContext.Provider>\n      <div className=\"SW-update-dialog\"></div>\n    </Box>\n  );\n}\n","import { Dexie, Table } from 'dexie';\nimport JwkEs256k from '@decentralized-identity/ion-sdk/dist/lib/models/JwkEs256k'\n\nimport { DidModel, PrivateKeyModel, VcModel } from './helpers/didTools';\n\n// スキーマの修正がある場合、この値を変更する必要あり\nconst SCHEMA_VERSION = 2\n\nexport class SettingsModel {\n  key: string;\n  value: any;\n  constructor(key: string, value: any) {\n    this.key = key;\n    this.value = value;\n  };\n\n  static KEYS = {\n    URL_OPERATION: 'URL_OPERATION',\n    URL_RESOLVE: 'URL_RESOLVE',\n  }\n};\n\nexport class DidInfoModel {\n  key: string;\n  didlong: string;\n  signingPrivateKey: JwkEs256k;\n  recoveryPrivateKey: JwkEs256k;\n  updatePrivateKey: JwkEs256k;\n  constructor(\n    key: string, \n    didlong: string,\n    signingPrivateKey: JwkEs256k,\n    recoveryPrivateKey: JwkEs256k,\n    updatePrivateKey: JwkEs256k\n    ) {\n    this.key = key;\n    this.didlong = didlong;\n    this.signingPrivateKey = signingPrivateKey;\n    this.recoveryPrivateKey = recoveryPrivateKey;\n    this.updatePrivateKey = updatePrivateKey;\n  };\n\n  static KEY = 'KEY';\n};\n\ninterface IonPwaDatabase extends Dexie {\n  settings: Table<SettingsModel, string>;\n  did: Table<DidModel, string>;\n  privatekey: Table<PrivateKeyModel, string>;\n  vc: Table<VcModel, number>;\n};\nexport const dexieDb = new Dexie('ionpwa-db') as IonPwaDatabase;\n\ndexieDb.version(SCHEMA_VERSION).stores({\n  settings: 'key',\n  did: 'id',\n  privatekey: 'id',\n  vc: '++id',\n});","import { dexieDb, SettingsModel } from '../dexie';\n\nexport class Settings {\n  urlOperation: string;\n  urlResolve: string;\n\n  constructor(){\n    // デフォルト値\n    this.urlOperation = 'https://beta.ion.msidentity.com/api/v1.0/';\n    this.urlResolve = 'https://beta.discover.did.microsoft.com/1.0/';\n  }\n\n  async load() {\n    // indexedDBからLoad\n    const dbUrlOperation = await dexieDb.settings.get(SettingsModel.KEYS.URL_OPERATION);\n    if (dbUrlOperation) {\n      this.urlOperation = dbUrlOperation.value;\n    }\n    const dbUrlResolve = await dexieDb.settings.get(SettingsModel.KEYS.URL_RESOLVE);\n    if (dbUrlResolve) {\n      this.urlResolve = dbUrlResolve.value;\n    }\n  }\n\n  async save() {\n    // indexedDBにSave\n    await dexieDb.settings.put(new SettingsModel(SettingsModel.KEYS.URL_OPERATION, this.urlOperation));\n    await dexieDb.settings.put(new SettingsModel(SettingsModel.KEYS.URL_RESOLVE, this.urlResolve));\n  }\n\n  static async load() {\n    const settings = new Settings();\n    await settings.load();\n    return settings;\n  }\n\n  static async clear() {\n    await dexieDb.settings.clear();\n  }\n}","import { IonDid, IonDocumentModel, IonKey, IonRequest, IonPublicKeyPurpose } from '@decentralized-identity/ion-sdk';\nimport JwkEs256k from '@decentralized-identity/ion-sdk/dist/lib/models/JwkEs256k';\nimport IonProofOfWork from 'ion-pow-sdk';\nimport { dexieDb } from '../dexie';\nimport urljoin from 'url-join';\nimport { fetch } from 'cross-fetch';\nimport base64url from 'base64url';\nimport { createHash } from 'crypto';\nimport { ES256K } from '@transmute/did-key-secp256k1';\n\nexport class DidTool {\n  static ACTION_PATH = {\n    OPERATIONS: 'operations',\n    IDENTIFIERS: 'identifiers',\n\n    PROOF: 'proof-of-work-challenge',\n  };\n\n  static async create(url: string, keyid: string = '') {\n    const signingKeyId = keyid ? keyid : VerifiableTool.generateKid();\n\n    // 鍵生成\n    const [recoveryKey, recoveryPrivateKey] = await IonKey.generateEs256kOperationKeyPair();\n    const [updateKey, updatePrivateKey] = await IonKey.generateEs256kOperationKeyPair();\n    const [signingKey, signingPrivateKey] = await IonKey.generateEs256kDidDocumentKeyPair({id: signingKeyId});\n    \n    // 追加属性\n    signingKey.purposes = [IonPublicKeyPurpose.Authentication];\n    const publicKeys = [signingKey];\n\n    // DID作成リクエスト\n    const document : IonDocumentModel = {\n      publicKeys\n    };\n    const input = { recoveryKey, updateKey, document };\n    const createRequest = IonRequest.createCreateRequest(input);\n    const longFormDid = IonDid.createLongFormDid(input);\n    const longFormSuffixData = longFormDid.substring(longFormDid.lastIndexOf(':') + 1);\n\n    const resText = await IonProofOfWork.submitIonRequest(\n      urljoin(url, DidTool.ACTION_PATH.PROOF),\n      urljoin(url, DidTool.ACTION_PATH.OPERATIONS),\n      JSON.stringify(createRequest)\n    );\n    if (!resText) {\n      return null;\n    };\n\n    // 各種パラメータ生成\n    const resObj = JSON.parse(resText);\n    const did: string = resObj.didDocument.id;\n    const didParts = did.split(':');\n    const scheme = didParts[0];\n    const didSuffix = didParts[didParts.length - 1];\n    let method = didParts[1];\n    if (didParts.length === 4) {\n      method +=  ':' +  didParts[2];\n    };\n    const published = resObj.didDocumentMetadata.method.published;\n\n    const didModel = new DidModel(\n      scheme,\n      method,\n      didSuffix,\n      longFormSuffixData,\n      signingKeyId,\n      published\n    );\n\n    return {\n      didModel: didModel,\n      signingPrivateKey: signingPrivateKey,\n      recoveryPrivateKey: recoveryPrivateKey,\n      updatePrivateKey: updatePrivateKey,\n    };\n  };\n\n  static async resolve(url: string, did: string) {\n    const res = await fetch(urljoin(url, DidTool.ACTION_PATH.IDENTIFIERS, did));\n    if (res.status !== 200) {\n      return {\n        error: {\n          status: res.status,\n          text: await res.text()\n        }\n      }\n    }\n    return await res.json();\n  }\n\n  static async save(didModel: DidModel) {\n    await dexieDb.did.put(didModel);\n  }\n\n  static async load() {\n    const didModel = await dexieDb.did.get(DidModel.ID);\n    if (didModel) {\n      return new DidModel(\n        didModel.scheme,\n        didModel.method,\n        didModel.didSuffix,\n        didModel.longFormSuffixData,\n        didModel.signingKeyId,\n        didModel.published\n      );\n    }\n    return null;\n  };\n\n  static async clear() {\n    await dexieDb.did.clear();\n  }\n};\n\nexport class PrivateKeyTool {\n  static RESERVE_ID = {\n    RECOVERY: '@RECOVERY',\n    UPDATE: '@UPDATE'\n  }\n\n  static async save(id: string, privateKey: JwkEs256k) {\n    await dexieDb.privatekey.put(new PrivateKeyModel(id, privateKey));\n  };\n  static async load(id: string) {\n    return await dexieDb.privatekey.get(id);\n  };\n  static async clear() {\n    await dexieDb.privatekey.clear();\n  }\n};\n\nexport class DidModel {\n  // did = scheme:method:didSuffix:longFormSuffixData\n  id: string;\n  scheme: string;\n  method: string;\n  didSuffix: string;\n  longFormSuffixData: string;\n  signingKeyId: string;\n  published: boolean;\n\n  constructor(\n    scheme: string,\n    method: string,\n    didSuffix: string,\n    longFormSuffixData: string,\n    signingKeyId: string,\n    published = false\n    ) {\n    this.id = DidModel.ID;\n    this.scheme = scheme;\n    this.method = method;\n    this.didSuffix = didSuffix;\n    this.longFormSuffixData = longFormSuffixData;\n    this.signingKeyId = signingKeyId;\n    this.published = published;\n  };\n\n  get did() {\n    return this.published ? this.didShort : this.didLong;\n  };\n\n  get didShort() {\n    return [this.scheme, this.method, this.didSuffix].join(':');\n  };\n\n  get didLong() {\n    return [this.scheme, this.method, this.didSuffix, this.longFormSuffixData].join(':');\n  };\n\n  get kid() {\n    return `${this.did}#${this.signingKeyId}`;\n  };\n\n  static ID = 'onlyid';\n};\n\nexport class PrivateKeyModel {\n  id: string;\n  privateKey: JwkEs256k;\n\n  constructor(id: string, privateKey: JwkEs256k) {\n    this.id = id;\n    this.privateKey = privateKey;\n  };\n};\n\nexport class VcModel {\n  id: number | undefined;\n  vc: JWTObject;\n\n  constructor(vc: JWTObject) {\n    this.vc = vc;\n  };\n};\n\nexport class VcTool {\n  static async save(vc: JWTObject) {\n    await dexieDb.vc.put(new VcModel(vc));\n  };\n  static async all() {\n    return await dexieDb.vc.toArray();\n  };\n  static async clear() {\n    await dexieDb.vc.clear();\n  }\n};\n\nexport class VerifiableTool {\n  static decodeJws(jwsString: string): JWTObject {\n    const jwsParse = jwsString.split('.');\n    return {\n      header: JSON.parse(base64url.decode(jwsParse[0])),\n      payload: JSON.parse(base64url.decode(jwsParse[1])),\n      jws: jwsString\n    };\n  };\n\n  static generateSub(jwk: any) {\n    const sha256 = createHash('sha256');\n    const jwkString = `{\"crv\":\"${jwk.crv}\",\"kty\":\"${jwk.kty}\",\"x\":\"${jwk.x}\",\"y\":\"${jwk.y}\"}`;\n    const hash = sha256.update(jwkString).digest();\n    return base64url.encode(hash);\n  };\n\n  static generateHash(text: any) {\n    const sha256 = createHash('sha256');\n    const hash = sha256.update(text).digest();\n    return base64url.toBase64(base64url.encode(hash));\n  };\n\n  static generateKid() {\n    const md5 = createHash('md5');\n    return md5.update(new Date().toString()).digest('hex');\n  }\n\n  static generateNonce() {\n    const md5 = createHash('md5');\n    const hash = md5.update(new Date().toString()).digest();\n    return base64url.toBase64(base64url.encode(hash));\n  }\n\n  static async signJws(header: any, payload: any, privateJwk: any){\n    switch(privateJwk.crv){\n      case 'secp256k1':\n        return ES256K.sign(payload, privateJwk, header);\n      default: throw new Error('Unsupported cryptographic type');\n    };\n  };\n\n  static async verifyJws(jws: string, publicJwk: any){\n    switch(publicJwk.crv){\n      case 'secp256k1':\n        return ES256K.verify(jws, publicJwk);\n      default: throw new Error('Unsupported cryptographic type');\n    };\n  };\n\n  static async verifyJwsByDid(jwtObj: JWTObject, resolveUrl: string) {\n    try {\n      // HeaderのkidからDIDとverificationMethodのidを取得\n      const [did, vid] = jwtObj.header.kid.split('#');\n      \n      // DID DocumentからpublicKeyJwkを取得\n      const didInfo = await DidTool.resolve(resolveUrl, did);\n      let jwk;\n      for (const vm of didInfo.didDocument.verificationMethod) {\n        if (vm.id === ('#' + vid)) {\n          jwk = vm.publicKeyJwk;\n          break;\n        }\n      }\n      if (!jwk) {\n        return false;\n      };\n\n      // 署名検証\n      return await VerifiableTool.verifyJws(jwtObj.jws, jwk);\n    } catch (e) {\n      return false;\n    };\n  };\n\n}\n\nexport type JWTObject = {\n  header: any,\n  payload: any,\n  jws: string,\n}\n","import * as React from 'react';\nimport { Typography, Container, Grid, Button, Snackbar, Alert, \n  Card, CardContent, CardActions, TextField, Chip, \n  Dialog, DialogTitle, DialogContent, DialogActions, Divider} from '@mui/material';\nimport { \n  Create as IconCreate\n} from '@mui/icons-material'\n\nimport { Settings } from '../helpers/settings';\nimport { DidTool, PrivateKeyTool, VcTool } from '../helpers/didTools';\nimport { useNowLoadingContext, useSettingsContext, useDidContext } from '../layout/sideMenuLayout';\n\nexport const PageTop = () => {\n  const nowLoadingContext = useNowLoadingContext();\n  const settingsContext = useSettingsContext();\n  const didContext = useDidContext();\n\n  const [openDidCreated, setOpenDidCreated] = React.useState(false);\n  const [openDialog, setOpenDialog] = React.useState(false);\n  const [textDialog, setTextDialog] = React.useState({title:'', text:''});\n\n  React.useEffect(() => {\n    if (!settingsContext.settings) {\n      setup();\n    };\n    return () => {\n      \n    };\n  });\n\n  const handleCloseDidCreated = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpenDidCreated(false);\n  };\n\n  /**\n   * 各種読み込み\n   */\n  const setup = async () => {\n    nowLoadingContext.setNowLoading(true);\n\n    // 設定の読み込み\n    settingsContext.setSettings(await Settings.load());\n\n    // DIDの読み込み\n    const didModel = await DidTool.load();\n    if (didModel) {\n      didContext.setDidModel(didModel);\n    }\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  };\n\n  const registerDid = async () => {\n    if (!settingsContext.settings) {\n      return\n    }\n    nowLoadingContext.setNowLoading(true);\n    \n    // DID発行\n    const didInfo = await DidTool.create(settingsContext.settings.urlOperation, 'sign-primary-key');\n    \n    if (didInfo) {\n      // 発行した各種情報を保存\n      await PrivateKeyTool.save(didInfo.didModel.signingKeyId, didInfo.signingPrivateKey);\n      await PrivateKeyTool.save(PrivateKeyTool.RESERVE_ID.RECOVERY, didInfo.recoveryPrivateKey);\n      await PrivateKeyTool.save(PrivateKeyTool.RESERVE_ID.UPDATE, didInfo.updatePrivateKey);\n      await DidTool.save(didInfo.didModel);\n\n      // コンテキストにも反映\n      didContext.setDidModel(didInfo.didModel);\n    }\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n      setOpenDidCreated(true);\n    }, 300);\n  };\n\n  const resolveDid = async () => {\n    if (!didContext.didModel) {\n      return\n    }\n    return await _resolveDid(didContext.didModel.didShort);\n  };\n\n  const resolveDidLong = async () => {\n    if (!didContext.didModel) {\n      return\n    }\n    return await _resolveDid(didContext.didModel.didLong);\n  };\n\n  const _resolveDid = async (did: string) => {\n    if (!settingsContext.settings) {\n      return\n    }\n    if (!didContext.didModel) {\n      return\n    }\n    nowLoadingContext.setNowLoading(true);\n\n    const resolveDid = await DidTool.resolve(settingsContext.settings.urlResolve, did);\n    if (!resolveDid.error) {\n      if (!didContext.didModel.published) {\n        if (resolveDid.didDocumentMetadata.method.published) {\n          // publishedの更新\n          didContext.didModel.published = true;\n          didContext.setDidModel(didContext.didModel);\n          await DidTool.save(didContext.didModel);\n        }\n      }\n    }\n\n    setTimeout(() => {\n      setTextDialog({\n        title: 'DID検証レスポンス',\n        text: JSON.stringify(resolveDid, null, 2)\n      });\n      setOpenDialog(true);\n      nowLoadingContext.setNowLoading(false);\n    }, 500);\n  };\n\n  const deleteDid = async () => {\n    nowLoadingContext.setNowLoading(true);\n\n    // 発行した各種情報を削除\n    await VcTool.clear();\n    await PrivateKeyTool.clear();\n    await DidTool.clear();\n\n    // コンテキストにも反映\n    didContext.setDidModel(null);\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  };\n\n  const closeDialog = async () => {\n    setOpenDialog(false);\n  };\n\n  if (!didContext.didModel) {\n    return (\n      <>\n        <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n          <Typography variant='h5' sx={{marginBottom: '16px'}}>\n            DID\n          </Typography>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              DIDが発行されていません。\n            </Grid>\n            <Grid container item xs={12} justifyContent='center'>\n              <Button variant='contained' size='large' startIcon={<IconCreate />} onClick={registerDid}>DID発行</Button>\n            </Grid>\n          </Grid>\n        </Container>\n        <Snackbar open={openDidCreated} autoHideDuration={6000} onClose={handleCloseDidCreated}>\n          <Alert onClose={handleCloseDidCreated} severity=\"success\" sx={{ width: '100%' }}>\n            DIDを発行しました。\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  const published = didContext.didModel.published ? <Chip label='公開済' color='success' /> : <Chip label='未公開' color='warning' />;\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          DID\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <Card variant='outlined'>\n              <CardContent>\n                <TextField\n                  label='DID'\n                  fullWidth\n                  multiline\n                  value={didContext.didModel.didShort}\n                  InputProps={{\n                    readOnly: true,\n                  }}\n                />\n                <Container fixed sx={{marginTop: '8px', textAlign: 'right'}} >\n                  {published}\n                </Container>\n              </CardContent>\n              <Divider sx={{marginX: '8px'}} />\n              <CardActions>\n                <Button size='small' onClick={resolveDid}>DIDを検証</Button>\n                <Button size='small' onClick={resolveDidLong}>DID(Long)を検証</Button>\n                <Button size='small' color='error' onClick={deleteDid}>削除</Button>\n              </CardActions>\n            </Card>\n          </Grid>\n        </Grid>\n      </Container>\n      <Snackbar open={openDidCreated} autoHideDuration={6000} onClose={handleCloseDidCreated}>\n        <Alert onClose={handleCloseDidCreated} severity=\"success\" sx={{ width: '100%' }}>\n          DIDを発行しました。\n        </Alert>\n      </Snackbar>\n      <Dialog\n        fullWidth={true}\n        maxWidth='sm'\n        open={openDialog}\n        aria-labelledby=\"responsive-dialog-title\"\n      >\n        <DialogTitle id=\"responsive-dialog-title\">\n          {textDialog.title}\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            label='DID'\n            fullWidth\n            multiline\n            maxRows={16}\n            value={textDialog.text}\n            InputProps={{\n              readOnly: true,\n              sx: {fontSize: '11px'}\n            }}\n            sx={{ marginTop: '8px' }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeDialog} autoFocus>\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}","import * as React from 'react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { Typography, Container, Card, CardContent, Button, TextField } from '@mui/material';\nimport { QrReader } from 'react-qr-reader';\nimport { useDidContext, useSettingsContext } from '../layout/sideMenuLayout';\nimport base64url from 'base64url';\n\nconst STATUS = {\n  QR_READ: 0,\n  QR_READED: 1,\n};\n\nexport const PageQr = () => {\n  const [status, setStatus] = React.useState(STATUS.QR_READ);\n  const [qrText, setQrText] = React.useState('');\n  const [inputText, setInputText] = React.useState('');\n\n  const didContext = useDidContext();\n  const settingsContext = useSettingsContext();\n  const navigate = useNavigate();\n\n  if (!didContext.didModel) {\n    return (<Navigate to=\"/\" replace />);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (e.target.id) {\n      case 'input-text':\n        setInputText(() => e.target.value)\n        break;\n    };\n  };\n\n  const manualInput = async () => {\n    startOpenid(inputText);\n  };\n\n  const startOpenid = async (requestUrl: string) => {\n    if (!settingsContext.settings) {\n      return\n    };\n    if (!didContext.didModel) {\n      return\n    };\n\n    if (requestUrl.indexOf('openid://') !== 0) {\n      alert('openid:// 形式のみ有効です')\n      return;\n    };\n\n    navigate('/openid/' + base64url.encode(requestUrl));\n  }\n\n  const qr = (\n    <QrReader\n      constraints={{ facingMode: 'environment' }}\n      onResult={(result) => {\n        if (result) {\n          console.log(result);\n          setQrText(result.getText());\n          setStatus(STATUS.QR_READED);\n\n          if (result.getText().indexOf('openid://vc') === 0) {\n            startOpenid(result.getText());\n          };\n        }\n      }}\n    />\n  );\n\n  const qrResult = (\n    <Card variant='outlined'>\n      <CardContent>\n        <Typography variant='h6'>\n          QR読み取り結果\n        </Typography>\n        <Typography sx={{wordWrap: 'break-word', marginTop: '16px'}}>\n          { qrText }\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n      <Typography variant='h5' sx={{marginBottom: '16px'}}>\n        QR読み取り\n      </Typography>\n      <Container maxWidth='sm'>\n        { status === STATUS.QR_READED ? qrResult : qr }\n      </Container>\n      <Container maxWidth='sm' sx={{marginTop: '16px'}}>\n        <TextField id='input-text' label='URL(openid://)' fullWidth multiline maxRows={6} size='small' value={inputText} onChange={handleChange} />\n        <Button variant='contained' sx={{marginTop: '8px'}} onClick={manualInput}>手入力</Button>\n      </Container>\n    </Container>\n  );\n}","import * as React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Typography, Container, TextField, Accordion, AccordionSummary, AccordionDetails} from '@mui/material';\nimport { \n  ExpandMore as IconExpandMore\n} from '@mui/icons-material'\nimport { useDidContext } from '../layout/sideMenuLayout';\nimport { PrivateKeyTool } from '../helpers/didTools';\n\nexport const PageDid = () => {\n  const didContext = useDidContext();\n  const [privateKeys, setPrivateKeys] = React.useState({signing:'', recovery:'', update:''});\n\n  React.useEffect(() => {\n    if (!privateKeys.signing) {\n      setup();\n    }\n    return () => {\n      \n    };\n  });\n\n  const setup = async () => {\n    if (didContext.didModel) {\n      setPrivateKeys({\n        signing: JSON.stringify((await PrivateKeyTool.load(didContext.didModel.signingKeyId))?.privateKey, null, 2),\n        recovery: JSON.stringify((await PrivateKeyTool.load(PrivateKeyTool.RESERVE_ID.RECOVERY))?.privateKey, null, 2),\n        update: JSON.stringify((await PrivateKeyTool.load(PrivateKeyTool.RESERVE_ID.UPDATE))?.privateKey, null, 2)\n      });\n    };\n  };\n\n  if (!didContext.didModel) {\n    return (<Navigate to=\"/\" replace />);\n  };\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          DID詳細\n        </Typography>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>DID(Long)</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='DID(Long)'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={didContext.didModel.didLong}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>SigningPrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='SigningPrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.signing}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>RecoveryPrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='RecoveryPrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.recovery}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary expandIcon={<IconExpandMore />}>\n            <Typography>UpdatePrivateKey</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <TextField\n              label='UpdatePrivateKey'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={privateKeys.update}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </AccordionDetails>\n        </Accordion>\n        \n      </Container>\n    </>\n  );\n}","import * as React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Typography, Container, TextField, Accordion, AccordionSummary, AccordionDetails} from '@mui/material';\nimport { \n  ExpandMore as IconExpandMore\n} from '@mui/icons-material'\nimport { useDidContext } from '../layout/sideMenuLayout';\nimport { VcModel, VcTool } from '../helpers/didTools';\n\nexport const PageVc = () => {\n  const didContext = useDidContext();\n  const [vcList, setVcList] = React.useState([] as VcModel[]);\n\n  React.useEffect(() => {\n    if (!vcList.length) {\n      setup();\n    };\n    return () => {\n      \n    };\n  });\n\n  const setup = async () => {\n    const vcList = await VcTool.all();\n    setVcList(vcList);\n  };\n\n  if (!didContext.didModel) {\n    return (<Navigate to=\"/\" replace />);\n  };\n\n  const items = [];\n  for (var cnt = 0; cnt < vcList.length; cnt++) {\n    items.push(\n      <Accordion key={'ac_' + cnt}>\n        <AccordionSummary expandIcon={<IconExpandMore />}>\n          <Typography>VC {cnt}</Typography>\n        </AccordionSummary>\n        <AccordionDetails>\n          <TextField\n            label='vc'\n            fullWidth\n            multiline\n            maxRows={8}\n            value={JSON.stringify(vcList[cnt].vc.payload, null, 2)}\n            InputProps={{\n              readOnly: true,\n              sx: {fontSize: '12px'}\n            }}\n          />\n        </AccordionDetails>\n      </Accordion>\n    );\n  }\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          VC一覧\n        </Typography>\n        { items }\n        \n      </Container>\n    </>\n  );\n}","import * as React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Typography, Container, Card, CardContent, CardHeader, Button, TextField, Avatar, Grid } from '@mui/material';\nimport { fetch } from 'cross-fetch';\nimport * as QueryString from 'query-string';\nimport { VerifiableTool, DidTool, PrivateKeyTool, VcTool, JWTObject, VcModel } from '../helpers/didTools';\nimport { useDidContext, useSettingsContext, useNowLoadingContext } from '../layout/sideMenuLayout';\nimport * as uuid from 'uuid';\nimport { useParams } from \"react-router\";\nimport base64url from 'base64url';\nimport { Settings } from '../helpers/settings';\n\nconst STATUS = {\n  INIT: 0,\n  START: 1,\n  SIOP_VC_CONFIRM: 11,\n  SIOP_VC_RECEIVED: 12,\n  SIOP_VP_CONFIRM: 21,\n  SIOP_VP_VERIFIED: 22,\n};\n\ntype Params = {\n  param: string;\n};\n\nexport const PageOpenid = () => {\n  const { param } = useParams<Params>();\n  const [status, setStatus] = React.useState(STATUS.INIT);\n  const [inputPin, setInputPin] = React.useState('');\n  const [vcProcess, setVcProcess] = React.useState({\n    credentialOffer: {} as JWTObject, \n    vcExpert: {} as JWTObject,\n  });\n  const [vpProcess, setVpProcess] = React.useState({\n    credentialOffer: {} as JWTObject, \n    vcList: [] as VcModel[],\n  });\n\n  const didContext = useDidContext();\n  const settingsContext = useSettingsContext();\n  const nowLoadingContext = useNowLoadingContext();\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    if (status === STATUS.INIT) {\n      nowLoadingContext.setNowLoading(true);\n      handleProc();\n    };\n    return () => {\n\n    };\n  });\n\n  const handleProc = async () => {\n    setStatus(STATUS.START);\n    if (param) {\n      // 設定の読み込み\n      settingsContext.setSettings(await Settings.load());\n\n      // DIDの読み込み\n      const didModel = await DidTool.load();\n      if (didModel) {\n        didContext.setDidModel(didModel);\n      }\n\n      const requestUrl = base64url.decode(param);\n      if (requestUrl.indexOf('openid://vc/') === 0) {\n        procVc(requestUrl);\n        return\n      }\n      if (requestUrl.indexOf('openid://vc2/') === 0) {\n        issueVc2(requestUrl);\n        return\n      }\n    }\n    \n    navigate('/');\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (e.target.id) {\n      case 'input-pin':\n        setInputPin(() => e.target.value)\n        break;\n    }\n  };\n\n  const issueVc2 = async (requestUrl: string) => {\n    const parsed = QueryString.parseUrl(requestUrl);\n    const url = new URL(parsed.query.request_uri as string);\n    url.searchParams.append('response_type', 'code');\n    url.searchParams.append('client_id', 'xxx');\n    url.searchParams.append('scope', 'idToken');\n    url.searchParams.append('nonce', 'xxx');\n    //url.searchParams.append('redirect_uri', `${location.origin}/issue/` + base64url.encode('openidres://vc2/'));\n    window.location.href = url.toString();\n  };\n\n  const getCredentialOffer = async (url: string) => {\n    if (!settingsContext.settings) {\n      throw new Error('Not initialized');\n    };\n\n    // 取得\n    const parsed = QueryString.parseUrl(url);\n    const response = await fetch(parsed.query.request_uri as string);\n    const body = await response.text();\n    const jwt = VerifiableTool.decodeJws(body);\n    console.log(jwt);\n\n    // 署名検証\n    if (! await VerifiableTool.verifyJwsByDid(jwt, settingsContext.settings.urlResolve)) {\n      throw new Error('verifyJwsByDid NG: CredentialOffer');\n    };\n    console.log('verifyJwsByDid OK');\n\n    return jwt;\n  };\n\n  const getVCExpert = async (url: string) => {\n    if (!settingsContext.settings) {\n      throw new Error('Not initialized');\n    };\n\n    const response = await fetch(url);\n    const resJson = await response.json();\n    const jwt = VerifiableTool.decodeJws(resJson.token);\n    console.log(jwt);\n\n    // 署名検証\n    if (! await VerifiableTool.verifyJwsByDid(jwt, settingsContext.settings.urlResolve)) {\n      throw new Error('verifyJwsByDid NG: CredentialOffer');\n    };\n    console.log('verifyJwsByDid OK');\n\n    return jwt;\n  };\n\n  const procVc = async (requestUrl: string) => {\n    if (requestUrl.indexOf('openid://vc/') !== 0) {\n      alert('openid://vc/ 形式のみ有効です')\n      return;\n    };\n\n    try {\n      nowLoadingContext.setNowLoading(true);\n\n      // 1. オファーリクエストを取得(Issure/Verifier→HolderへのSIOP Request)\n      const credentialOffer = await getCredentialOffer(requestUrl);\n\n      if (credentialOffer.payload.prompt && credentialOffer.payload.prompt === 'create') {\n        issueVc(credentialOffer);\n      } else {\n        verifyVc(credentialOffer);\n      }\n    } catch (e: any) {\n      alert(e.message || e);\n      nowLoadingContext.setNowLoading(false);\n    };\n  }\n\n  const verifyVc = async (credentialOffer: JWTObject) => {\n    try {\n\n      // 2. 対象のVCを抽出\n      const vcList = await VcTool.all();\n      if (!vcList.length) {\n        throw Error('VC not found.')\n      }\n\n      // 情報を一時保存\n      setVpProcess({\n        credentialOffer: credentialOffer,\n        vcList: vcList\n      });\n      setStatus(STATUS.SIOP_VP_CONFIRM);\n    } catch (e: any) {\n      alert(e.message || e);\n    };\n\n    // ここで内容をユーザーに提示し、確認を行う\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  }\n\n  const issueVc = async (credentialOffer: JWTObject) => {\n    try {\n\n      // 2. オファーリクエストの検証\n      const manifestUrl = credentialOffer.payload.claims.vp_token.presentation_definition.input_descriptors[0].issuance[0].manifest2;\n      const vcExpert = await getVCExpert(manifestUrl);\n\n      // 情報を一時保存\n      setVcProcess({\n        credentialOffer: credentialOffer,\n        vcExpert: vcExpert\n      });\n      setStatus(STATUS.SIOP_VC_CONFIRM);\n    } catch (e: any) {\n      alert(e.message || e);\n    };\n\n    // ここで内容をユーザーに提示し、確認を行う\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  }\n\n  const addVC = async () => {\n    if (!settingsContext.settings) {\n      return\n    }\n    if (!didContext.didModel) {\n      return\n    }\n\n    // 3. レスポンス(Holder→IssureへのSIOP Response)\n\n    try {\n      nowLoadingContext.setNowLoading(true);\n\n      // 自身の公開鍵を取得\n      const didInfo = await DidTool.resolve(settingsContext.settings.urlResolve, didContext.didModel.did);\n      const now = Math.floor(Date.now() / 1000);\n\n      const credentialRequest = {\n        header: {\n          alg: 'ES256K',\n          typ: 'JWT',\n          kid: didContext.didModel.kid\n        },\n        payload: {\n          iss: 'https://self-issued.me',\n          aud: vcProcess.vcExpert.payload.input.credentialIssuer,\n          contract: vcProcess.vcExpert.payload.display.contract,\n          iat: now,\n          exp: now + 600,\n          sub_jwk: JSON.parse(JSON.stringify(didInfo.didDocument.verificationMethod[0].publicKeyJwk)),\n          sub: VerifiableTool.generateSub(didInfo.didDocument.verificationMethod[0].publicKeyJwk),\n          jti: uuid.v4(),\n          did: didContext.didModel.did,\n          pin: VerifiableTool.generateHash(inputPin),\n          attestations: {\n            idTokens: {\n              'https://self-issued.me': vcProcess.credentialOffer.payload.id_token_hint\n            }\n          }\n        }\n      };\n\n      // To Micfosoft向けの置換\n      if (credentialRequest.payload.aud.indexOf('/api/issuer/card') > -1) {\n        credentialRequest.payload.aud = 'https://beta.did.msidentity.com/v1.0/f55d947c-0f8e-48d7-b1ea-b7f5c99291ce/verifiableCredential/card/issue';\n      };\n\n      console.log(credentialRequest);\n\n      // 秘密鍵で署名\n      const privateKeyModel = await PrivateKeyTool.load(didContext.didModel.signingKeyId);\n      const credentialRequestJws = await VerifiableTool.signJws(credentialRequest.header, credentialRequest.payload, privateKeyModel?.privateKey);\n      //console.log(credentialRequestJws);\n\n      const response = await fetch(vcProcess.vcExpert.payload.input.credentialIssuer, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        body: credentialRequestJws,\n      });\n\n      if (response.status !== 200) {\n        throw Error(await response.text());\n      }\n\n      const resJson = await response.json();\n      const jwt = VerifiableTool.decodeJws(resJson.vc);\n      console.log(jwt);\n\n      // 署名検証\n      if (! await VerifiableTool.verifyJwsByDid(jwt, settingsContext.settings.urlResolve)) {\n        throw new Error('verifyJwsByDid NG: CredentialOffer');\n      };\n      console.log('verifyJwsByDid OK');\n\n      // VCの保存\n      await VcTool.save(jwt);\n\n      setStatus(STATUS.SIOP_VC_RECEIVED);\n    } catch (e: any) {\n      alert(e.message || e);\n    };\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  };\n\n  const sendVP = async () => {\n    if (!settingsContext.settings) {\n      return\n    }\n    if (!didContext.didModel) {\n      return\n    }\n\n    // 3. レスポンス(Holder→VerifierへのSIOP Response)\n\n    try {\n      nowLoadingContext.setNowLoading(true);\n\n      // 自身の公開鍵を取得\n      const now = Math.floor(Date.now() / 1000);\n\n      const idToken = {\n        header: {\n          alg: 'ES256K',\n          typ: 'JWT',\n          kid: didContext.didModel.kid\n        },\n        payload: {\n          iss: 'https://self-issued.me/v2/openid-vc',\n          aud: vpProcess.credentialOffer.payload.client_id,\n          sub: didContext.didModel.did,\n          iat: now,\n          exp: now + 600,\n          nonce: vpProcess.credentialOffer.payload.nonce,\n          _vp_token: {\n            presentation_submission: {\n              id: uuid.v4(),\n              definition_id: uuid.v4(),\n              descriptor_map: [\n                {\n                  id: 'VerifiedCredentialExpert',\n                  format: 'jwt_vp',\n                  path: '$',\n                  'path_nested': {\n                    id: 'VerifiedCredentialExpert',\n                    format: 'jwt_vc',\n                    path: '$.verifiableCredential[0]'\n                  }\n                }\n              ]\n            }\n          }\n        }\n      };\n\n      console.log(idToken);\n\n      // 秘密鍵で署名\n      const privateKeyModel = await PrivateKeyTool.load(didContext.didModel.signingKeyId);\n      const idTokenJws = await VerifiableTool.signJws(idToken.header, idToken.payload, privateKeyModel?.privateKey);\n\n      const vpToken = {\n        header: {\n          alg: 'ES256K',\n          typ: 'JWT',\n          kid: didContext.didModel.kid\n        },\n        payload: {\n          iss: didContext.didModel.did,\n          aud: vpProcess.credentialOffer.payload.client_id,\n          iat: now,\n          nbf: now,\n          exp: now + 600,\n          nonce: vpProcess.credentialOffer.payload.nonce,\n          vp: {\n            '@context': [\n              'https://www.w3.org/2018/credentials/v1'\n            ],\n            type: [\n              'VerifiablePresentation'\n            ],\n            verifiableCredential: [\n              vpProcess.vcList[0].vc.jws\n            ]\n          }\n        }\n      };\n\n      console.log(vpToken);\n\n      // 秘密鍵で署名\n      //const privateKeyModel = await PrivateKeyTool.load(didContext.didModel.signingKeyId);\n      const vpTokenJws = await VerifiableTool.signJws(vpToken.header, vpToken.payload, privateKeyModel?.privateKey);\n\n      const params = new URLSearchParams();\n      params.append('id_token', idTokenJws);\n      params.append('vp_token', vpTokenJws);\n      params.append('state', vpProcess.credentialOffer.payload.state);\n\n      const response = await fetch(vpProcess.credentialOffer.payload.redirect_uri, {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        body: params,\n      });\n\n      if (response.status !== 200) {\n        throw Error(await response.text());\n      }\n\n      setStatus(STATUS.SIOP_VP_VERIFIED);\n    } catch (e: any) {\n      alert(e.message || e);\n    };\n\n    setTimeout(() => {\n      nowLoadingContext.setNowLoading(false);\n    }, 300);\n  };\n\n  if (status === STATUS.SIOP_VC_RECEIVED) {\n    return (\n      <Container maxWidth='sm' sx={{ paddingX: '8px' }}>\n        <Typography variant='h5' sx={{ marginBottom: '16px' }}>\n          VC受け取り完了\n        </Typography>\n        <Typography>\n          VCをウォレットに登録しました。\n        </Typography>\n      </Container>\n    );\n  }\n\n  if (status === STATUS.SIOP_VC_CONFIRM) {\n    return (\n      <Container maxWidth='sm' sx={{ paddingX: '8px' }}>\n        <Typography variant='h5' sx={{ marginBottom: '16px' }}>\n          VC発行確認\n        </Typography>\n        <Card sx={{ bgcolor: vcProcess.vcExpert.payload.display.card.backgroundColor, maxWidth: '360px', marginX: 'auto' }}>\n          <CardHeader\n            avatar={<Avatar src={vcProcess.vcExpert.payload.display.card.logo.uri} />}\n            title={vcProcess.vcExpert.payload.display.card.title}\n            sx={{ color: vcProcess.vcExpert.payload.display.card.textColor }}\n          />\n          <CardContent>\n            <Typography sx={{ color: vcProcess.vcExpert.payload.display.card.textColor }}>\n              <br />\n              Microsoft\n            </Typography>\n          </CardContent>\n        </Card>\n        <Typography sx={{ marginTop: '16px' }}>{vcProcess.vcExpert.payload.display.consent.title}</Typography>\n        <TextField id='input-pin' label='PIN' fullWidth sx={{ marginTop: '16px' }} inputProps={{ inputMode: 'numeric', pattern: '[0-9]*' }}\n          value={inputPin} onChange={handleChange}\n        />\n        <Grid container spacing={2} sx={{ marginTop: '16px' }}>\n          <Grid item xs={6}>\n            <Button variant='outlined' fullWidth onClick={() => navigate('/')}>キャンセル</Button>\n          </Grid>\n          <Grid item xs={6}>\n            <Button variant='contained' fullWidth onClick={addVC}>追加</Button>\n          </Grid>\n        </Grid>\n      </Container>\n    );\n  }\n\n  if (status === STATUS.SIOP_VP_CONFIRM) {\n    return (\n      <Container maxWidth='sm' sx={{ paddingX: '8px' }}>\n        <Typography variant='h5' sx={{ marginBottom: '16px' }}>\n          VC提示確認\n        </Typography>\n        <Card variant='outlined'>\n          <CardContent>\n            <Typography sx={{ marginBottom: '16px' }}>\n              提示条件\n            </Typography>\n            <TextField\n              label='input_descriptors'\n              fullWidth\n              multiline\n              maxRows={8}\n              value={JSON.stringify(vpProcess.credentialOffer.payload.claims.vp_token.presentation_definition.input_descriptors, null, 2)}\n              InputProps={{\n                readOnly: true,\n                sx: {fontSize: '12px'}\n              }}\n            />\n          </CardContent>\n        </Card>\n        <Typography sx={{ marginTop: '16px' }}>\n          \n        </Typography>\n        <Grid container spacing={2} sx={{ marginTop: '16px' }}>\n          <Grid item xs={6}>\n            <Button variant='outlined' fullWidth onClick={() => navigate('/')}>キャンセル</Button>\n          </Grid>\n          <Grid item xs={6}>\n            <Button variant='contained' fullWidth onClick={sendVP}>提示</Button>\n          </Grid>\n        </Grid>\n      </Container>\n    );\n  };\n\n  if (status === STATUS.SIOP_VP_VERIFIED) {\n    return (\n      <Container maxWidth='sm' sx={{ paddingX: '8px' }}>\n        <Typography variant='h5' sx={{ marginBottom: '16px' }}>\n          VC提示完了\n        </Typography>\n        <Typography>\n          VCの提示が完了しました。\n        </Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth='sm' sx={{ paddingX: '8px' }}>\n      <Typography variant='h5' sx={{ marginBottom: '16px' }}>\n        Loading . . .\n      </Typography>\n    </Container>\n  );\n}","import * as React from 'react';\nimport { Typography, Container, Grid, Button, TextField, Snackbar, Alert } from '@mui/material';\nimport { Save as IconSave } from '@mui/icons-material'\n\nimport { Settings } from '../helpers/settings';\n\nexport const PageSettings = () => {\n  const [open, setOpen] = React.useState(false);\n  const [urlOperation, setUrlOperation] = React.useState('');\n  const [urlResolve, setUrlResolve] = React.useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    switch (e.target.id) {\n      case 'url-operation':\n        setUrlOperation(() => e.target.value)\n        break;\n      case 'url-resolve':\n        setUrlResolve(() => e.target.value)\n        break;\n    }\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  const saveSettings = async () => {\n    // 設定の保存\n    const settings = new Settings();\n    settings.urlOperation = urlOperation;\n    settings.urlResolve = urlResolve;\n    await settings.save();\n    \n    handleOpen();\n  };\n\n  const resetSettings = async () => {\n    await Settings.clear();\n    const settings = new Settings();\n    setUrlOperation(settings.urlOperation);\n    setUrlResolve(settings.urlResolve);\n  };\n\n  React.useEffect(() => {\n    // 設定の読み込み\n    Settings.load().then((settings) => {\n      setUrlOperation(settings.urlOperation);\n      setUrlResolve(settings.urlResolve);\n    });\n    return () => {\n      \n    };\n  },[])\n\n  return (\n    <>\n      <Container maxWidth='sm' sx={{paddingX: '8px'}}>\n        <Typography variant='h5' sx={{marginBottom: '16px'}}>\n          Settings\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <TextField id='url-operation' fullWidth label='Operation URL' variant='outlined' value={urlOperation} onChange={handleChange} />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField id='url-resolve' fullWidth label='Resolve URL' variant='outlined' value={urlResolve} onChange={handleChange} />\n          </Grid>\n          <Grid item xs={8}>\n            <Button fullWidth variant='contained' startIcon={<IconSave />} onClick={saveSettings}>保存</Button>\n          </Grid>\n          <Grid item xs={4}>\n            <Button fullWidth variant='contained' color='error' onClick={resetSettings}>リセット</Button>\n          </Grid>\n        </Grid>\n      </Container>\n      <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\n        <Alert onClose={handleClose} severity=\"success\" sx={{ width: '100%' }}>\n          設定を保存しました。\n        </Alert>\n      </Snackbar>\n    </>\n  );\n}","import { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './App.css';\nimport { SideMenuLayout } from './layout/sideMenuLayout';\nimport { PageTop } from './pages/top';\nimport { PageQr } from './pages/qr';\nimport { PageDid } from './pages/did';\nimport { PageVc } from './pages/vc';\nimport { PageOpenid } from './pages/openid';\nimport { PageSettings } from './pages/settings';\n\nconst App = () => {\n  return <BrowserRouter>\n    <Routes>\n      <Route element={<SideMenuLayout />}>\n        <Route index element={<PageTop />} />\n        <Route path='qr' element={<PageQr />} />\n        <Route path='did' element={<PageDid />} />\n        <Route path='vc' element={<PageVc />} />\n        <Route path='openid/:param' element={<PageOpenid />} />\n\n        <Route path='settings' element={<PageSettings />} />\n      </Route>\n    </Routes>\n  </BrowserRouter>;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        // 以下3行を追加\n        if (registration.waiting && config && config.onUpdate) {\n          config.onUpdate(registration);\n        }\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          } else if (installingWorker.state === 'activated') {\n            window.location.reload();\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { useState } from 'react';\nimport { Button, Dialog, DialogTitle, DialogContent, DialogActions, DialogContentText} from '@mui/material';\n\nexport const SWUpdateDialog: React.FC<{ registration: ServiceWorkerRegistration }> = ({ registration }) => {\n  const [show, setShow] = useState(!!registration.waiting);\n  const handleUpdate = () => {\n    registration.waiting?.postMessage({ type: 'SKIP_WAITING' });\n    setShow(false);\n    //window.location.reload();\n  };\n\n  return (\n    <Dialog open={show}>\n      <DialogTitle style={{textAlign: \"center\"}}>\n        アップデート通知\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          新しいバージョンがリリースされました。\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions sx={{justifyContent: \"center\"}}>\n        <Button onClick={handleUpdate}>アップデート</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { SWUpdateDialog } from './ServiceWorkerUpdateDialog';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\n//serviceWorkerRegistration.unregister();\nserviceWorkerRegistration.register({\n  onUpdate: registration => {\n    if (registration.waiting) {\n      ReactDOM.render(<SWUpdateDialog registration={registration} />, document.querySelector('.SW-update-dialog'));\n    }\n  },\n});\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}